{"ast":null,"code":"import _objectSpread from\"/Users/jstarry/Workspace/solana/break/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/jstarry/Workspace/solana/break/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import*as React from\"react\";import{Redirect,useLocation}from\"react-router-dom\";import{Header}from\"components/Header\";import{PaymentCard}from\"components/PaymentCard\";import{TransactionContainer}from\"components/TxContainer\";import{TransactionModal}from\"components/TxModal\";import{useTps,useCreatedCount,useAvgConfirmationTime}from\"providers/transactions\";import{useAccountState}from\"providers/account\";import{useActiveUsers}from\"providers/socket\";import{useGameState,useCountdown}from\"providers/game\";export default function Game(){var _useGameState=useGameState(),_useGameState2=_slicedToArray(_useGameState,1),gameState=_useGameState2[0];var _useCountdown=useCountdown(),_useCountdown2=_slicedToArray(_useCountdown,1),countdown=_useCountdown2[0];var showPayment=gameState===\"payment\";var loading=gameState===\"loading\";var showStats=gameState===\"play\"||countdown!==undefined;var _useAccountState=useAccountState(),_useAccountState2=_slicedToArray(_useAccountState,1),account=_useAccountState2[0];var location=useLocation();if(showPayment){if(!account){return/*#__PURE__*/React.createElement(Redirect,{to:_objectSpread(_objectSpread({},location),{},{pathname:\"/setup\"})});}else{return/*#__PURE__*/React.createElement(Redirect,{to:_objectSpread(_objectSpread({},location),{},{pathname:\"/wallet\"})});}}return/*#__PURE__*/React.createElement(\"div\",{className:\"container min-vh-100 d-flex flex-column\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null),showStats&&/*#__PURE__*/React.createElement(Stats,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"row flex-grow-1 mb-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},loading&&countdown===undefined?/*#__PURE__*/React.createElement(EmptyCard,null):showPayment&&account?/*#__PURE__*/React.createElement(PaymentCard,{account:account}):/*#__PURE__*/React.createElement(TransactionContainer,{enabled:true}))),/*#__PURE__*/React.createElement(TransactionModal,null));}export function EmptyCard(){return/*#__PURE__*/React.createElement(\"div\",{className:\"card mb-0 h-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"}));}function Stats(){var createdCount=useCreatedCount();var avgConfTime=useAvgConfirmationTime().toFixed(2);var tps=useTps();var activeUsers=useActiveUsers();return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(StatCard,{label:\"Transactions Sent\",value:createdCount,icon:\"send\"}),/*#__PURE__*/React.createElement(StatCard,{label:\"Avg. Confirmation Time\",value:\"\".concat(avgConfTime,\"s\"),icon:\"clock\"}),/*#__PURE__*/React.createElement(StatCard,{label:\"Players Online\",value:activeUsers,icon:\"user\"}),/*#__PURE__*/React.createElement(StatCard,{label:\"Transactions per Second\",value:tps,icon:\"zap\"}));}function StatCard(_ref){var label=_ref.label,value=_ref.value,icon=_ref.icon;return/*#__PURE__*/React.createElement(\"div\",{className:\"stat-card col-6 col-lg-3 d-flex flex-column\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card flex-grow-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-9\"},/*#__PURE__*/React.createElement(\"h6\",{className:\"text-uppercase text-truncate mb-2\"},label),/*#__PURE__*/React.createElement(\"span\",{className:\"h2 mb-0 text-primary\"},value)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 d-none d-md-block text-right\"},/*#__PURE__*/React.createElement(\"span\",{className:\"h2 fe fe-\".concat(icon,\" text-primary mb-0\")}))))));}","map":{"version":3,"sources":["/Users/jstarry/Workspace/solana/break/client/src/pages/GamePage.tsx"],"names":["React","Redirect","useLocation","Header","PaymentCard","TransactionContainer","TransactionModal","useTps","useCreatedCount","useAvgConfirmationTime","useAccountState","useActiveUsers","useGameState","useCountdown","Game","gameState","countdown","showPayment","loading","showStats","undefined","account","location","pathname","EmptyCard","Stats","createdCount","avgConfTime","toFixed","tps","activeUsers","StatCard","label","value","icon"],"mappings":"qUAAA,MAAO,GAAKA,CAAAA,KAAZ,KAAuB,OAAvB,CACA,OAASC,QAAT,CAAmBC,WAAnB,KAAsC,kBAAtC,CAEA,OAASC,MAAT,KAAuB,mBAAvB,CACA,OAASC,WAAT,KAA4B,wBAA5B,CACA,OAASC,oBAAT,KAAqC,wBAArC,CACA,OAASC,gBAAT,KAAiC,oBAAjC,CACA,OACEC,MADF,CAEEC,eAFF,CAGEC,sBAHF,KAIO,wBAJP,CAKA,OAASC,eAAT,KAAgC,mBAAhC,CACA,OAASC,cAAT,KAA+B,kBAA/B,CACA,OAASC,YAAT,CAAuBC,YAAvB,KAA2C,gBAA3C,CAEA,cAAe,SAASC,CAAAA,IAAT,EAAgB,mBACTF,YAAY,EADH,gDACtBG,SADsB,qCAETF,YAAY,EAFH,gDAEtBG,SAFsB,mBAG7B,GAAMC,CAAAA,WAAW,CAAGF,SAAS,GAAK,SAAlC,CACA,GAAMG,CAAAA,OAAO,CAAGH,SAAS,GAAK,SAA9B,CACA,GAAMI,CAAAA,SAAS,CAAGJ,SAAS,GAAK,MAAd,EAAwBC,SAAS,GAAKI,SAAxD,CAL6B,qBAMXV,eAAe,EANJ,sDAMtBW,OANsB,sBAO7B,GAAMC,CAAAA,QAAQ,CAAGpB,WAAW,EAA5B,CAEA,GAAIe,WAAJ,CAAiB,CACf,GAAI,CAACI,OAAL,CAAc,CACZ,mBAAO,oBAAC,QAAD,EAAU,EAAE,gCAAOC,QAAP,MAAiBC,QAAQ,CAAE,QAA3B,EAAZ,EAAP,CACD,CAFD,IAEO,CACL,mBAAO,oBAAC,QAAD,EAAU,EAAE,gCAAOD,QAAP,MAAiBC,QAAQ,CAAE,SAA3B,EAAZ,EAAP,CACD,CACF,CAED,mBACE,2BAAK,SAAS,CAAC,yCAAf,eACE,4CACE,oBAAC,MAAD,MADF,CAEGJ,SAAS,eAAI,oBAAC,KAAD,MAFhB,CADF,cAKE,2BAAK,SAAS,CAAC,sBAAf,eACE,2BAAK,SAAS,CAAC,KAAf,EACGD,OAAO,EAAIF,SAAS,GAAKI,SAAzB,cACC,oBAAC,SAAD,MADD,CAEGH,WAAW,EAAII,OAAf,cACF,oBAAC,WAAD,EAAa,OAAO,CAAEA,OAAtB,EADE,cAGF,oBAAC,oBAAD,EAAsB,OAAO,KAA7B,EANJ,CADF,CALF,cAgBE,oBAAC,gBAAD,MAhBF,CADF,CAoBD,CAED,MAAO,SAASG,CAAAA,SAAT,EAAqB,CAC1B,mBACE,2BAAK,SAAS,CAAC,iBAAf,eACE,2BAAK,SAAS,CAAC,aAAf,EADF,cAEE,2BAAK,SAAS,CAAC,WAAf,EAFF,CADF,CAMD,CAED,QAASC,CAAAA,KAAT,EAAiB,CACf,GAAMC,CAAAA,YAAY,CAAGlB,eAAe,EAApC,CACA,GAAMmB,CAAAA,WAAW,CAAGlB,sBAAsB,GAAGmB,OAAzB,CAAiC,CAAjC,CAApB,CACA,GAAMC,CAAAA,GAAG,CAAGtB,MAAM,EAAlB,CACA,GAAMuB,CAAAA,WAAW,CAAGnB,cAAc,EAAlC,CAEA,mBACE,2BAAK,SAAS,CAAC,KAAf,eACE,oBAAC,QAAD,EAAU,KAAK,CAAC,mBAAhB,CAAoC,KAAK,CAAEe,YAA3C,CAAyD,IAAI,CAAC,MAA9D,EADF,cAEE,oBAAC,QAAD,EACE,KAAK,CAAC,wBADR,CAEE,KAAK,WAAKC,WAAL,KAFP,CAGE,IAAI,CAAC,OAHP,EAFF,cAOE,oBAAC,QAAD,EAAU,KAAK,CAAC,gBAAhB,CAAiC,KAAK,CAAEG,WAAxC,CAAqD,IAAI,CAAC,MAA1D,EAPF,cAQE,oBAAC,QAAD,EAAU,KAAK,CAAC,yBAAhB,CAA0C,KAAK,CAAED,GAAjD,CAAsD,IAAI,CAAC,KAA3D,EARF,CADF,CAYD,CAOD,QAASE,CAAAA,QAAT,MAAqD,IAAjCC,CAAAA,KAAiC,MAAjCA,KAAiC,CAA1BC,KAA0B,MAA1BA,KAA0B,CAAnBC,IAAmB,MAAnBA,IAAmB,CACnD,mBACE,2BAAK,SAAS,CAAC,6CAAf,eACE,2BAAK,SAAS,CAAC,kBAAf,eACE,2BAAK,SAAS,CAAC,WAAf,eACE,2BAAK,SAAS,CAAC,wBAAf,eACE,2BAAK,SAAS,CAAC,iBAAf,eACE,0BAAI,SAAS,CAAC,mCAAd,EAAmDF,KAAnD,CADF,cAEE,4BAAM,SAAS,CAAC,sBAAhB,EAAwCC,KAAxC,CAFF,CADF,cAKE,2BAAK,SAAS,CAAC,uCAAf,eACE,4BAAM,SAAS,oBAAcC,IAAd,sBAAf,EADF,CALF,CADF,CADF,CADF,CADF,CAiBD","sourcesContent":["import * as React from \"react\";\nimport { Redirect, useLocation } from \"react-router-dom\";\n\nimport { Header } from \"components/Header\";\nimport { PaymentCard } from \"components/PaymentCard\";\nimport { TransactionContainer } from \"components/TxContainer\";\nimport { TransactionModal } from \"components/TxModal\";\nimport {\n  useTps,\n  useCreatedCount,\n  useAvgConfirmationTime,\n} from \"providers/transactions\";\nimport { useAccountState } from \"providers/account\";\nimport { useActiveUsers } from \"providers/socket\";\nimport { useGameState, useCountdown } from \"providers/game\";\n\nexport default function Game() {\n  const [gameState] = useGameState();\n  const [countdown] = useCountdown();\n  const showPayment = gameState === \"payment\";\n  const loading = gameState === \"loading\";\n  const showStats = gameState === \"play\" || countdown !== undefined;\n  const [account] = useAccountState();\n  const location = useLocation();\n\n  if (showPayment) {\n    if (!account) {\n      return <Redirect to={{ ...location, pathname: \"/setup\" }} />;\n    } else {\n      return <Redirect to={{ ...location, pathname: \"/wallet\" }} />;\n    }\n  }\n\n  return (\n    <div className=\"container min-vh-100 d-flex flex-column\">\n      <div>\n        <Header />\n        {showStats && <Stats />}\n      </div>\n      <div className=\"row flex-grow-1 mb-5\">\n        <div className=\"col\">\n          {loading && countdown === undefined ? (\n            <EmptyCard />\n          ) : showPayment && account ? (\n            <PaymentCard account={account} />\n          ) : (\n            <TransactionContainer enabled />\n          )}\n        </div>\n      </div>\n      <TransactionModal />\n    </div>\n  );\n}\n\nexport function EmptyCard() {\n  return (\n    <div className=\"card mb-0 h-100\">\n      <div className=\"card-header\"></div>\n      <div className=\"card-body\"></div>\n    </div>\n  );\n}\n\nfunction Stats() {\n  const createdCount = useCreatedCount();\n  const avgConfTime = useAvgConfirmationTime().toFixed(2);\n  const tps = useTps();\n  const activeUsers = useActiveUsers();\n\n  return (\n    <div className=\"row\">\n      <StatCard label=\"Transactions Sent\" value={createdCount} icon=\"send\" />\n      <StatCard\n        label=\"Avg. Confirmation Time\"\n        value={`${avgConfTime}s`}\n        icon=\"clock\"\n      />\n      <StatCard label=\"Players Online\" value={activeUsers} icon=\"user\" />\n      <StatCard label=\"Transactions per Second\" value={tps} icon=\"zap\" />\n    </div>\n  );\n}\n\ntype StatProps = {\n  label: React.ReactNode;\n  value: React.ReactNode;\n  icon: string;\n};\nfunction StatCard({ label, value, icon }: StatProps) {\n  return (\n    <div className=\"stat-card col-6 col-lg-3 d-flex flex-column\">\n      <div className=\"card flex-grow-1\">\n        <div className=\"card-body\">\n          <div className=\"row align-items-center\">\n            <div className=\"col-12 col-md-9\">\n              <h6 className=\"text-uppercase text-truncate mb-2\">{label}</h6>\n              <span className=\"h2 mb-0 text-primary\">{value}</span>\n            </div>\n            <div className=\"col-md-3 d-none d-md-block text-right\">\n              <span className={`h2 fe fe-${icon} text-primary mb-0`}></span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}