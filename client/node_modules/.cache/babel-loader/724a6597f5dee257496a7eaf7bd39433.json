{"ast":null,"code":"import _objectSpread from\"/Users/jstarry/Workspace/solana/break/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/jstarry/Workspace/solana/break/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{Link,useLocation,useHistory}from\"react-router-dom\";import{useDebounceCallback}from\"@react-hook/debounce\";import{useServer,serverName,useClusterModal,SERVERS,DEFAULT_SERVER,serverInfo,useCustomUrl}from\"../providers/server\";export function useQuery(){return new URLSearchParams(useLocation().search);}function ClusterModal(){var _useClusterModal=useClusterModal(),_useClusterModal2=_slicedToArray(_useClusterModal,2),show=_useClusterModal2[0],setShow=_useClusterModal2[1];var onClose=function onClose(){return setShow(false);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"modal fade fixed-right\".concat(show?\" show\":\"\"),onClick:onClose},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-dialog modal-dialog-vertical\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-body\",onClick:function onClick(e){return e.stopPropagation();}},/*#__PURE__*/React.createElement(\"span\",{className:\"c-pointer\",onClick:onClose},\"\\xD7\"),/*#__PURE__*/React.createElement(\"h2\",{className:\"text-center mb-4 mt-4\"},\"Choose a Cluster\"),/*#__PURE__*/React.createElement(ClusterToggle,null))))));}function CustomClusterInput(_ref){var active=_ref.active;var _useCustomUrl=useCustomUrl(),_useCustomUrl2=_slicedToArray(_useCustomUrl,2),customUrl=_useCustomUrl2[0],setCustomUrl=_useCustomUrl2[1];var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),editing=_React$useState2[0],setEditing=_React$useState2[1];var query=useQuery();var history=useHistory();var location=useLocation();var customClass=function customClass(prefix){return active?\"\".concat(prefix,\"-info\"):\"\";};var clusterLocation=function clusterLocation(location){if(customUrl.length>0)query.set(\"cluster\",\"custom\");return _objectSpread(_objectSpread({},location),{},{search:query.toString()});};var onUrlInput=useDebounceCallback(function(url){setCustomUrl(url);if(url.length>0){query.set(\"cluster\",\"custom\");history.push(_objectSpread(_objectSpread({},location),{},{search:query.toString()}));}},500);var inputTextClass=editing?\"\":\"text-muted\";return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Link,{to:function to(location){return clusterLocation(location);},className:\"btn input-group input-group-merge p-0\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",defaultValue:customUrl,className:\"form-control form-control-prepended b-black \".concat(inputTextClass,\" \").concat(customClass(\"border\")),onFocus:function onFocus(){return setEditing(true);},onBlur:function onBlur(){return setEditing(false);},onInput:function onInput(e){return onUrlInput(e.currentTarget.value);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-prepend\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-text pr-0 \".concat(customClass(\"border\"),\" b-black\")},/*#__PURE__*/React.createElement(\"span\",{className:customClass(\"text\")||\"\"},\"Custom:\")))),/*#__PURE__*/React.createElement(\"span\",{className:\"text-muted text-center w-100\"},\"Note: This must be a break server url\"));}function ClusterToggle(){var _useServer=useServer(),server=_useServer.server;return/*#__PURE__*/React.createElement(\"div\",{className:\"btn-group-toggle d-flex flex-wrap mb-4\"},SERVERS.map(function(next){var active=next===server;if(next===\"custom\"){return/*#__PURE__*/React.createElement(CustomClusterInput,{key:next,active:active});}var btnClass=active?\"active btn-dark border-info text-white\":\"btn-dark\";var clusterLocation=function clusterLocation(location){var params=new URLSearchParams(location.search);if(next!==DEFAULT_SERVER){params.set(\"cluster\",next);}else{params.delete(\"cluster\");}return _objectSpread(_objectSpread({},location),{},{search:params.toString()});};return/*#__PURE__*/React.createElement(Link,{key:next,className:\"btn text-left col-12 mb-3 \".concat(btnClass),to:clusterLocation},\"\".concat(serverName(next),\": \"),/*#__PURE__*/React.createElement(\"span\",{className:\"text-muted d-inline-block\"},serverInfo(next)));}));}export default ClusterModal;","map":{"version":3,"sources":["/Users/jstarry/Workspace/solana/break/client/src/components/ClusterModal.tsx"],"names":["React","Link","useLocation","useHistory","useDebounceCallback","useServer","serverName","useClusterModal","SERVERS","DEFAULT_SERVER","serverInfo","useCustomUrl","useQuery","URLSearchParams","search","ClusterModal","show","setShow","onClose","e","stopPropagation","CustomClusterInput","active","customUrl","setCustomUrl","useState","editing","setEditing","query","history","location","customClass","prefix","clusterLocation","length","set","toString","onUrlInput","url","push","inputTextClass","currentTarget","value","ClusterToggle","server","map","next","btnClass","params","delete"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link, useLocation, useHistory } from \"react-router-dom\";\nimport { useDebounceCallback } from \"@react-hook/debounce\";\nimport { Location } from \"history\";\nimport {\n  useServer,\n  serverName,\n  useClusterModal,\n  SERVERS,\n  DEFAULT_SERVER,\n  serverInfo,\n  useCustomUrl,\n} from \"../providers/server\";\n\nexport function useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nfunction ClusterModal() {\n  const [show, setShow] = useClusterModal();\n  const onClose = () => setShow(false);\n  return (\n    <>\n      <div\n        className={`modal fade fixed-right${show ? \" show\" : \"\"}`}\n        onClick={onClose}\n      >\n        <div className=\"modal-dialog modal-dialog-vertical\">\n          <div className=\"modal-content\">\n            <div className=\"modal-body\" onClick={(e) => e.stopPropagation()}>\n              <span className=\"c-pointer\" onClick={onClose}>\n                &times;\n              </span>\n\n              <h2 className=\"text-center mb-4 mt-4\">Choose a Cluster</h2>\n\n              <ClusterToggle />\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\ntype InputProps = { active: boolean };\nfunction CustomClusterInput({ active }: InputProps) {\n  const [customUrl, setCustomUrl] = useCustomUrl();\n  const [editing, setEditing] = React.useState(false);\n  const query = useQuery();\n  const history = useHistory();\n  const location = useLocation();\n\n  const customClass = (prefix: string) => (active ? `${prefix}-info` : \"\");\n\n  const clusterLocation = (location: Location) => {\n    if (customUrl.length > 0) query.set(\"cluster\", \"custom\");\n    return {\n      ...location,\n      search: query.toString(),\n    };\n  };\n\n  const onUrlInput = useDebounceCallback((url: string) => {\n    setCustomUrl(url);\n    if (url.length > 0) {\n      query.set(\"cluster\", \"custom\");\n      history.push({ ...location, search: query.toString() });\n    }\n  }, 500);\n\n  const inputTextClass = editing ? \"\" : \"text-muted\";\n  return (\n    <>\n      <Link\n        to={(location) => clusterLocation(location)}\n        className=\"btn input-group input-group-merge p-0\"\n      >\n        <input\n          type=\"text\"\n          defaultValue={customUrl}\n          className={`form-control form-control-prepended b-black ${inputTextClass} ${customClass(\n            \"border\"\n          )}`}\n          onFocus={() => setEditing(true)}\n          onBlur={() => setEditing(false)}\n          onInput={(e) => onUrlInput(e.currentTarget.value)}\n        />\n        <div className=\"input-group-prepend\">\n          <div\n            className={`input-group-text pr-0 ${customClass(\"border\")} b-black`}\n          >\n            <span className={customClass(\"text\") || \"\"}>Custom:</span>\n          </div>\n        </div>\n      </Link>\n      <span className=\"text-muted text-center w-100\">\n        Note: This must be a break server url\n      </span>\n    </>\n  );\n}\n\nfunction ClusterToggle() {\n  const { server } = useServer();\n\n  return (\n    <div className=\"btn-group-toggle d-flex flex-wrap mb-4\">\n      {SERVERS.map((next) => {\n        const active = next === server;\n\n        if (next === \"custom\") {\n          return <CustomClusterInput key={next} active={active} />;\n        }\n\n        const btnClass = active\n          ? `active btn-dark border-info text-white`\n          : \"btn-dark\";\n\n        const clusterLocation = (location: Location) => {\n          const params = new URLSearchParams(location.search);\n          if (next !== DEFAULT_SERVER) {\n            params.set(\"cluster\", next);\n          } else {\n            params.delete(\"cluster\");\n          }\n          return {\n            ...location,\n            search: params.toString(),\n          };\n        };\n\n        return (\n          <Link\n            key={next}\n            className={`btn text-left col-12 mb-3 ${btnClass}`}\n            to={clusterLocation}\n          >\n            {`${serverName(next)}: `}\n            <span className=\"text-muted d-inline-block\">\n              {serverInfo(next)}\n            </span>\n          </Link>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default ClusterModal;\n"]},"metadata":{},"sourceType":"module"}