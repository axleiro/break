{"ast":null,"code":"var _jsxFileName = \"/Users/jstarry/Workspace/solana/break/client/src/components/TxContainer.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nimport React, { useRef, useEffect, useCallback } from \"react\";\nimport { TransactionSquare } from \"./TxSquare\";\nimport { useCreateTxRef, useTransactions } from \"providers/transactions\";\nimport { useGameState, useResetGame, COUNTDOWN_SECS, useCountdown } from \"providers/game\";\nimport { TxTableRow } from \"./TxTableRow\";\nimport { DEBUG_MODE } from \"providers/transactions/confirmed\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function TransactionContainer({\n  enabled\n}) {\n  _s();\n\n  const createTxRef = useCreateTxRef();\n  const gameState = useGameState();\n  const [countdown, setCountdown] = useCountdown();\n  const resetGame = useResetGame();\n  const [rapidFire, setRapidFire] = React.useState(false);\n  const makeTransaction = useCallback(() => {\n    if (enabled) {\n      if (countdown !== undefined) {\n        createTxRef.current();\n      } else if (gameState === \"play\") {\n        createTxRef.current();\n        setCountdown(performance.now());\n      }\n    }\n  }, [enabled, createTxRef, gameState, countdown, setCountdown]);\n  useEffect(() => {\n    if (rapidFire && !enabled) {\n      setRapidFire(false);\n      return;\n    } else if (!rapidFire) {\n      return;\n    }\n\n    let intervalId;\n    const timeoutId = setTimeout(() => {\n      intervalId = setInterval(() => {\n        makeTransaction();\n      }, 30);\n    }, 300);\n    return () => {\n      clearTimeout(timeoutId);\n      clearInterval(intervalId);\n    };\n  }, [rapidFire, enabled, makeTransaction]);\n  useEffect(() => {\n    const testMode = new URLSearchParams(window.location.search).has(\"test\");\n    if (!testMode) return;\n    makeTransaction();\n    const testInterval = window.setInterval(() => makeTransaction(), 1000);\n    return () => clearInterval(testInterval);\n  }, [makeTransaction]);\n  useEffect(() => {\n    document.addEventListener(\"keyup\", makeTransaction);\n    return () => {\n      document.removeEventListener(\"keyup\", makeTransaction);\n    };\n  }, [makeTransaction]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card h-100 mb-0\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(HelpButton, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-truncate\",\n          children: \"Live Transaction Statuses\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-primary d-none d-md-block\",\n        children: enabled ? \"Press any key to send a transaction\" : \"Game finished\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), DEBUG_MODE ? /*#__PURE__*/_jsxDEV(DebugTable, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-body\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tx-wrapper border-1 border-primary h-100 position-relative\",\n        children: [countdown === undefined && enabled ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex h-100 justify-content-center align-items-center p-3\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-center\",\n            children: [\"Try to break Solana's network by sending as many transactions as you can in \", COUNTDOWN_SECS, \" seconds!\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 15\n        }, this) : null, /*#__PURE__*/_jsxDEV(InnerContainer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-footer\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"btn btn-pink w-100 text-uppercase text-truncate touch-action-none\",\n        onContextMenu: e => e.preventDefault(),\n        onPointerDown: () => setRapidFire(true),\n        onPointerUp: () => setRapidFire(false),\n        onPointerLeave: () => setRapidFire(false),\n        onPointerCancel: () => setRapidFire(false),\n        onClick: enabled ? makeTransaction : resetGame,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: `fe fe-${enabled ? \"zap\" : \"repeat\"} mr-2`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), enabled ? \"Send new transactions\" : \"Play again\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TransactionContainer, \"JZnWYzu81pVHSCl/5nMJp+7QV/o=\", false, function () {\n  return [useCreateTxRef, useGameState, useCountdown, useResetGame];\n});\n\n_c = TransactionContainer;\n\nfunction DebugTable() {\n  _s2();\n\n  const scrollEl = useRef(null);\n  const transactions = useTransactions();\n  useEffect(() => {\n    const current = scrollEl.current;\n\n    if (current) {\n      current.scrollTop = current.scrollHeight;\n    }\n  }, [transactions.length]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: scrollEl,\n        className: \"debug-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-sm mb-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-muted sticky\",\n                children: \"Transaction\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-muted sticky\",\n                children: \"Target Slot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-muted sticky\",\n                children: \"Inclusion Slot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-muted sticky\",\n                children: \"Tx Count\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-muted sticky\",\n                children: \"Entry Count\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-muted sticky\",\n                children: \"Max Tx Per Entry\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-muted sticky\",\n                children: \"All Shreds\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-muted sticky\",\n                children: \"Replay Start\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-muted sticky\",\n                children: \"Replay End\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-muted sticky\",\n                children: \"Voted\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-muted sticky\",\n                children: \"Confirmed\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"text-muted sticky\",\n                children: \"Rooted\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"list\",\n            children: transactions.map(tx => /*#__PURE__*/_jsxDEV(TxTableRow, {\n              transaction: tx\n            }, tx.details.signature, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(DebugTable, \"JGSwnw/HLozBwNHjuIOAPbTt+pM=\", false, function () {\n  return [useTransactions];\n});\n\n_c2 = DebugTable;\n\nfunction InnerContainer() {\n  _s3();\n\n  const scrollEl = useRef(null);\n  const transactions = useTransactions();\n  useEffect(() => {\n    const current = scrollEl.current;\n\n    if (current) {\n      current.scrollTop = current.scrollHeight;\n    }\n  }, [transactions.length]);\n  const renderTransactions = transactions.map(tx => /*#__PURE__*/_jsxDEV(TransactionSquare, {\n    transaction: tx\n  }, tx.details.signature, false, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 5\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: scrollEl,\n    className: \"square-container\",\n    tabIndex: 0,\n    children: renderTransactions\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 174,\n    columnNumber: 5\n  }, this);\n}\n\n_s3(InnerContainer, \"JGSwnw/HLozBwNHjuIOAPbTt+pM=\", false, function () {\n  return [useTransactions];\n});\n\n_c3 = InnerContainer;\n\nfunction HelpButton() {\n  _s4();\n\n  const [show, setShow] = React.useState(false);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"popover-container c-pointer mr-3\",\n    onClick: () => setShow(true),\n    onMouseOver: () => setShow(true),\n    onMouseOut: () => setShow(false),\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"fe fe-help-circle\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Legend, {\n      show: show\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 5\n  }, this);\n}\n\n_s4(HelpButton, \"NKb1ZOdhT+qUsWLXSgjSS2bk2C4=\");\n\n_c4 = HelpButton;\n\nfunction Legend({\n  show\n}) {\n  if (!show) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"popover bs-popover-bottom right show\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"arrow\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popover-body\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-column\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex align-items-center mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"btn square legend slideInRight btn-dark mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Pending transaction\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex align-items-center mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"btn square legend slideInRight btn-primary mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Confirmed transaction\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex align-items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"btn square legend slideInRight btn-danger mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Failed transaction\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 5\n  }, this);\n}\n\n_c5 = Legend;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"TransactionContainer\");\n$RefreshReg$(_c2, \"DebugTable\");\n$RefreshReg$(_c3, \"InnerContainer\");\n$RefreshReg$(_c4, \"HelpButton\");\n$RefreshReg$(_c5, \"Legend\");","map":{"version":3,"sources":["/Users/jstarry/Workspace/solana/break/client/src/components/TxContainer.tsx"],"names":["React","useRef","useEffect","useCallback","TransactionSquare","useCreateTxRef","useTransactions","useGameState","useResetGame","COUNTDOWN_SECS","useCountdown","TxTableRow","DEBUG_MODE","TransactionContainer","enabled","createTxRef","gameState","countdown","setCountdown","resetGame","rapidFire","setRapidFire","useState","makeTransaction","undefined","current","performance","now","intervalId","timeoutId","setTimeout","setInterval","clearTimeout","clearInterval","testMode","URLSearchParams","window","location","search","has","testInterval","document","addEventListener","removeEventListener","e","preventDefault","DebugTable","scrollEl","transactions","scrollTop","scrollHeight","length","map","tx","details","signature","InnerContainer","renderTransactions","HelpButton","show","setShow","Legend"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useCallback } from \"react\";\n\nimport { TransactionSquare } from \"./TxSquare\";\nimport { useCreateTxRef, useTransactions } from \"providers/transactions\";\nimport {\n  useGameState,\n  useResetGame,\n  COUNTDOWN_SECS,\n  useCountdown,\n} from \"providers/game\";\nimport { TxTableRow } from \"./TxTableRow\";\nimport { DEBUG_MODE } from \"providers/transactions/confirmed\";\n\nexport function TransactionContainer({ enabled }: { enabled?: boolean }) {\n  const createTxRef = useCreateTxRef();\n  const gameState = useGameState();\n  const [countdown, setCountdown] = useCountdown();\n  const resetGame = useResetGame();\n  const [rapidFire, setRapidFire] = React.useState(false);\n\n  const makeTransaction = useCallback(() => {\n    if (enabled) {\n      if (countdown !== undefined) {\n        createTxRef.current();\n      } else if (gameState === \"play\") {\n        createTxRef.current();\n        setCountdown(performance.now());\n      }\n    }\n  }, [enabled, createTxRef, gameState, countdown, setCountdown]);\n\n  useEffect(() => {\n    if (rapidFire && !enabled) {\n      setRapidFire(false);\n      return;\n    } else if (!rapidFire) {\n      return;\n    }\n\n    let intervalId: NodeJS.Timeout;\n    const timeoutId = setTimeout(() => {\n      intervalId = setInterval(() => {\n        makeTransaction();\n      }, 30);\n    }, 300);\n\n    return () => {\n      clearTimeout(timeoutId);\n      clearInterval(intervalId);\n    };\n  }, [rapidFire, enabled, makeTransaction]);\n\n  useEffect(() => {\n    const testMode = new URLSearchParams(window.location.search).has(\"test\");\n    if (!testMode) return;\n    makeTransaction();\n    const testInterval = window.setInterval(() => makeTransaction(), 1000);\n    return () => clearInterval(testInterval);\n  }, [makeTransaction]);\n\n  useEffect(() => {\n    document.addEventListener(\"keyup\", makeTransaction);\n    return () => {\n      document.removeEventListener(\"keyup\", makeTransaction);\n    };\n  }, [makeTransaction]);\n\n  return (\n    <div className=\"card h-100 mb-0\">\n      <div className=\"card-header\">\n        <div className=\"d-flex align-items-center\">\n          <HelpButton />\n          <span className=\"text-truncate\">Live Transaction Statuses</span>\n        </div>\n        <div className=\"text-primary d-none d-md-block\">\n          {enabled ? \"Press any key to send a transaction\" : \"Game finished\"}\n        </div>\n      </div>\n      {DEBUG_MODE ? (\n        <DebugTable />\n      ) : (\n        <div className=\"card-body\">\n          <div className=\"tx-wrapper border-1 border-primary h-100 position-relative\">\n            {countdown === undefined && enabled ? (\n              <div className=\"d-flex h-100 justify-content-center align-items-center p-3\">\n                <h2 className=\"text-center\">\n                  Try to break Solana's network by sending as many transactions\n                  as you can in {COUNTDOWN_SECS} seconds!\n                </h2>\n              </div>\n            ) : null}\n            <InnerContainer />\n          </div>\n        </div>\n      )}\n      <div className=\"card-footer\">\n        <span\n          className=\"btn btn-pink w-100 text-uppercase text-truncate touch-action-none\"\n          onContextMenu={(e) => e.preventDefault()}\n          onPointerDown={() => setRapidFire(true)}\n          onPointerUp={() => setRapidFire(false)}\n          onPointerLeave={() => setRapidFire(false)}\n          onPointerCancel={() => setRapidFire(false)}\n          onClick={enabled ? makeTransaction : resetGame}\n        >\n          <span className={`fe fe-${enabled ? \"zap\" : \"repeat\"} mr-2`}></span>\n          {enabled ? \"Send new transactions\" : \"Play again\"}\n        </span>\n      </div>\n    </div>\n  );\n}\n\nfunction DebugTable() {\n  const scrollEl = useRef<HTMLDivElement>(null);\n  const transactions = useTransactions();\n\n  useEffect(() => {\n    const current = scrollEl.current;\n    if (current) {\n      current.scrollTop = current.scrollHeight;\n    }\n  }, [transactions.length]);\n\n  return (\n    <div className=\"main\">\n      <div className=\"content\">\n        <div ref={scrollEl} className=\"debug-wrapper\">\n          <table className=\"table table-sm mb-0\">\n            <thead>\n              <tr>\n                <th className=\"text-muted sticky\">Transaction</th>\n                <th className=\"text-muted sticky\">Target Slot</th>\n                <th className=\"text-muted sticky\">Inclusion Slot</th>\n                <th className=\"text-muted sticky\">Tx Count</th>\n                <th className=\"text-muted sticky\">Entry Count</th>\n                <th className=\"text-muted sticky\">Max Tx Per Entry</th>\n                <th className=\"text-muted sticky\">All Shreds</th>\n                <th className=\"text-muted sticky\">Replay Start</th>\n                <th className=\"text-muted sticky\">Replay End</th>\n                <th className=\"text-muted sticky\">Voted</th>\n                <th className=\"text-muted sticky\">Confirmed</th>\n                <th className=\"text-muted sticky\">Rooted</th>\n              </tr>\n            </thead>\n            <tbody className=\"list\">\n              {transactions.map((tx) => (\n                <TxTableRow key={tx.details.signature} transaction={tx} />\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction InnerContainer() {\n  const scrollEl = useRef<HTMLDivElement>(null);\n  const transactions = useTransactions();\n\n  useEffect(() => {\n    const current = scrollEl.current;\n    if (current) {\n      current.scrollTop = current.scrollHeight;\n    }\n  }, [transactions.length]);\n\n  const renderTransactions = transactions.map((tx) => (\n    <TransactionSquare key={tx.details.signature} transaction={tx} />\n  ));\n\n  return (\n    <div ref={scrollEl} className=\"square-container\" tabIndex={0}>\n      {renderTransactions}\n    </div>\n  );\n}\n\nfunction HelpButton() {\n  const [show, setShow] = React.useState(false);\n\n  return (\n    <div\n      className=\"popover-container c-pointer mr-3\"\n      onClick={() => setShow(true)}\n      onMouseOver={() => setShow(true)}\n      onMouseOut={() => setShow(false)}\n    >\n      <span className=\"fe fe-help-circle\"></span>\n      <Legend show={show} />\n    </div>\n  );\n}\n\nfunction Legend({ show }: { show: boolean }) {\n  if (!show) return null;\n  return (\n    <div className=\"popover bs-popover-bottom right show\">\n      <div className=\"arrow\" />\n      <div className=\"popover-body\">\n        <div className=\"d-flex flex-column\">\n          <div className=\"d-flex align-items-center mb-3\">\n            <div className=\"btn square legend slideInRight btn-dark mr-2\" />\n            <span>Pending transaction</span>\n          </div>\n\n          <div className=\"d-flex align-items-center mb-3\">\n            <div className=\"btn square legend slideInRight btn-primary mr-2\" />\n            <span>Confirmed transaction</span>\n          </div>\n\n          <div className=\"d-flex align-items-center\">\n            <div className=\"btn square legend slideInRight btn-danger mr-2\" />\n            <span>Failed transaction</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}