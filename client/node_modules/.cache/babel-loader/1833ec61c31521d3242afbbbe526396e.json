{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/jstarry/Workspace/solana/break/client/src/components/TxModal.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport * as React from \"react\";\nimport { COMMITMENT_PARAM, getCommitmentName } from \"providers/transactions\";\nimport { useSelectTransaction, useSelectedTransaction } from \"providers/transactions/selected\";\nimport { useClusterParam } from \"providers/server/http\";\nexport function TransactionModal() {\n  _s();\n\n  const selectedTx = useSelectedTransaction();\n  const selectTx = useSelectTransaction();\n\n  const onClose = () => selectTx(undefined);\n\n  const show = !!selectedTx;\n\n  const renderContent = () => {\n    if (!selectedTx) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-dialog modal-dialog-centered\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        onClick: e => e.stopPropagation(),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-card card mb-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"card-header-title\",\n              children: \"Transaction Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 23,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"close\",\n              onClick: onClose,\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                \"aria-hidden\": \"true\",\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 26,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 25,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 22,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: /*#__PURE__*/_jsxDEV(TransactionDetails, {\n              transaction: selectedTx\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 31,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 7\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `modal fade${show ? \" show\" : \"\"}`,\n      onClick: onClose,\n      children: renderContent()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Overlay, {\n      show: show\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(TransactionModal, \"nhJm6c+e9/w4hSCQDKEfh5ArEy4=\", false, function () {\n  return [useSelectedTransaction, useSelectTransaction];\n});\n\n_c = TransactionModal;\n\nfunction Overlay({\n  show\n}) {\n  if (show) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-backdrop fade show\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 20\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fade\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 10\n  }, this);\n}\n\n_c2 = Overlay;\nexport function TransactionDetails({\n  transaction\n}) {\n  _s2();\n\n  const clusterParam = useClusterParam();\n  const {\n    signature,\n    feeAccount,\n    programAccount\n  } = transaction.details;\n\n  const explorerLink = path => `https://explorer.solana.com/${path}?${clusterParam}`;\n\n  const feeAddress = feeAccount.toBase58();\n  const dataAddress = programAccount.toBase58();\n\n  function displaySignature() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex align-items-center justify-content-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"\",\n          children: \"Signature\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: explorerLink(\"tx/\" + signature),\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            className: \"btn btn-sm btn-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"fe fe-external-link mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this), \"Explorer\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex mb-4\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"badge badge-dark overflow-hidden\",\n          children: /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"mb-0 text-truncate\",\n            children: signature\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n  function displayAccounts() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex align-items-center justify-content-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"\",\n          children: \"Fee Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: explorerLink(\"address/\" + feeAddress),\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            className: \"btn btn-sm btn-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"fe fe-external-link mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 15\n            }, this), \"Explorer\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex align-items-center justify-content-between mb-4 pb-4 border-bottom\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"\",\n          children: \"Break Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: explorerLink(\"address/\" + dataAddress),\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            className: \"btn btn-sm btn-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"fe fe-external-link mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this), \"Explorer\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n  function displayFinalized() {\n    if (transaction.status === \"success\") {\n      if (transaction.pending) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"spinner-grow spinner-grow-sm mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), \"Finalizing\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-success\",\n          children: \"Finalized\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 16\n        }, this);\n      }\n    } else {\n      return \"N/A\";\n    }\n  }\n\n  function displayConfTime() {\n    if (transaction.status === \"timeout\") {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-warning\",\n        children: \"Timed out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (transaction.status === \"success\") {\n      const confTime = transaction.timing[getCommitmentName(COMMITMENT_PARAM)];\n\n      if (confTime) {\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-success\",\n          children: [confTime, \" sec\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 16\n        }, this);\n      }\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"spinner-grow spinner-grow-sm mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), \"Processing\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [displaySignature(), displayAccounts(), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: \"Confirmation Time\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), displayConfTime()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this), transaction.status === \"success\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: \"Confirmed Block\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }, this), transaction.slot.estimated]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: \"Finalization Status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this), displayFinalized()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s2(TransactionDetails, \"bikysy6KKK1jzgalpaz+yfTeDXI=\", false, function () {\n  return [useClusterParam];\n});\n\n_c3 = TransactionDetails;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"TransactionModal\");\n$RefreshReg$(_c2, \"Overlay\");\n$RefreshReg$(_c3, \"TransactionDetails\");","map":{"version":3,"sources":["/Users/jstarry/Workspace/solana/break/client/src/components/TxModal.tsx"],"names":["React","COMMITMENT_PARAM","getCommitmentName","useSelectTransaction","useSelectedTransaction","useClusterParam","TransactionModal","selectedTx","selectTx","onClose","undefined","show","renderContent","e","stopPropagation","Overlay","TransactionDetails","transaction","clusterParam","signature","feeAccount","programAccount","details","explorerLink","path","feeAddress","toBase58","dataAddress","displaySignature","displayAccounts","displayFinalized","status","pending","displayConfTime","confTime","timing","slot","estimated"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { TransactionState, COMMITMENT_PARAM, getCommitmentName } from \"providers/transactions\";\nimport {\n  useSelectTransaction,\n  useSelectedTransaction,\n} from \"providers/transactions/selected\";\nimport { useClusterParam } from \"providers/server/http\";\n\nexport function TransactionModal() {\n  const selectedTx = useSelectedTransaction();\n  const selectTx = useSelectTransaction();\n  const onClose = () => selectTx(undefined);\n  const show = !!selectedTx;\n\n  const renderContent = () => {\n    if (!selectedTx) return null;\n\n    return (\n      <div className=\"modal-dialog modal-dialog-centered\">\n        <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n          <div className=\"modal-card card mb-0\">\n            <div className=\"card-header\">\n              <h4 className=\"card-header-title\">Transaction Details</h4>\n\n              <button type=\"button\" className=\"close\" onClick={onClose}>\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n            </div>\n\n            <div className=\"card-body\">\n              <TransactionDetails transaction={selectedTx} />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <>\n      <div className={`modal fade${show ? \" show\" : \"\"}`} onClick={onClose}>\n        {renderContent()}\n      </div>\n      <Overlay show={show} />\n    </>\n  );\n}\n\nfunction Overlay({ show }: { show: boolean }) {\n  if (show) return <div className=\"modal-backdrop fade show\"></div>;\n  return <div className=\"fade\"></div>;\n}\n\nexport function TransactionDetails({\n  transaction,\n}: {\n  transaction: TransactionState;\n}) {\n  const clusterParam = useClusterParam();\n  const { signature, feeAccount, programAccount } = transaction.details;\n  const explorerLink = (path: string) =>\n    `https://explorer.solana.com/${path}?${clusterParam}`;\n  const feeAddress = feeAccount.toBase58();\n  const dataAddress = programAccount.toBase58();\n\n  function displaySignature() {\n    return (\n      <>\n        <div className=\"d-flex align-items-center justify-content-between mb-4\">\n          <div className=\"\">Signature</div>\n          <div>\n            <a\n              href={explorerLink(\"tx/\" + signature)}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"btn btn-sm btn-white\"\n            >\n              <span className=\"fe fe-external-link mr-2\"></span>\n              Explorer\n            </a>\n          </div>\n        </div>\n        <div className=\"d-flex mb-4\">\n          <span className=\"badge badge-dark overflow-hidden\">\n            <h4 className=\"mb-0 text-truncate\">{signature}</h4>\n          </span>\n        </div>\n      </>\n    );\n  }\n\n  function displayAccounts() {\n    return (\n      <>\n        <div className=\"d-flex align-items-center justify-content-between mb-4\">\n          <div className=\"\">Fee Account</div>\n          <div>\n            <a\n              href={explorerLink(\"address/\" + feeAddress)}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"btn btn-sm btn-white\"\n            >\n              <span className=\"fe fe-external-link mr-2\"></span>\n              Explorer\n            </a>\n          </div>\n        </div>\n\n        <div className=\"d-flex align-items-center justify-content-between mb-4 pb-4 border-bottom\">\n          <div className=\"\">Break Account</div>\n          <div>\n            <a\n              href={explorerLink(\"address/\" + dataAddress)}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"btn btn-sm btn-white\"\n            >\n              <span className=\"fe fe-external-link mr-2\"></span>\n              Explorer\n            </a>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function displayFinalized() {\n    if (transaction.status === \"success\") {\n      if (transaction.pending) {\n        return (\n          <div>\n            <span className=\"spinner-grow spinner-grow-sm mr-2\"></span>\n            Finalizing\n          </div>\n        );\n      } else {\n        return <span className=\"text-success\">Finalized</span>;\n      }\n    } else {\n      return \"N/A\";\n    }\n  }\n\n  function displayConfTime() {\n    if (transaction.status === \"timeout\") {\n      return <span className=\"text-warning\">Timed out</span>;\n    }\n    if (transaction.status === \"success\") {\n      const confTime = transaction.timing[getCommitmentName(COMMITMENT_PARAM)];\n      if (confTime) {\n        return <span className=\"text-success\">{confTime} sec</span>;\n      }\n    }\n    return (\n      <div>\n        <span className=\"spinner-grow spinner-grow-sm mr-2\"></span>\n        Processing\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {displaySignature()}\n      {displayAccounts()}\n      <div className=\"d-flex justify-content-between mb-4\">\n        <div className=\"\">Confirmation Time</div>\n        {displayConfTime()}\n      </div>\n      {transaction.status === \"success\" && (\n        <div className=\"d-flex justify-content-between mb-4\">\n          <div className=\"\">Confirmed Block</div>\n          {transaction.slot.estimated}\n        </div>\n      )}\n      <div className=\"d-flex justify-content-between\">\n        <div className=\"\">Finalization Status</div>\n        {displayFinalized()}\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}