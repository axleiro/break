{"ast":null,"code":"import _objectSpread from\"/Users/jstarry/Workspace/solana/break/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/jstarry/Workspace/solana/break/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import*as React from\"react\";import{Redirect,useLocation}from\"react-router-dom\";import{Header}from\"components/Header\";import{PaymentCard}from\"components/PaymentCard\";import{TransactionContainer}from\"components/TxContainer\";import{TransactionModal}from\"components/TxModal\";import{useTps,useCreatedCount,useAvgConfirmationTime}from\"providers/transactions\";import{usePayerState}from\"providers/wallet\";import{useActiveUsers}from\"providers/server/socket\";import{useGameState,useCountdown}from\"providers/game\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Game(){var gameState=useGameState();var _useCountdown=useCountdown(),_useCountdown2=_slicedToArray(_useCountdown,1),countdown=_useCountdown2[0];var showPayment=gameState===\"payment\";var loading=gameState===\"loading\";var showStats=gameState===\"play\"||countdown!==undefined;var _usePayerState=usePayerState(),_usePayerState2=_slicedToArray(_usePayerState,1),payer=_usePayerState2[0];var location=useLocation();if(showPayment){if(!payer){return/*#__PURE__*/_jsx(Redirect,{to:_objectSpread(_objectSpread({},location),{},{pathname:\"/setup\"})});}else{return/*#__PURE__*/_jsx(Redirect,{to:_objectSpread(_objectSpread({},location),{},{pathname:\"/wallet\"})});}}return/*#__PURE__*/_jsxs(\"div\",{className:\"container min-vh-100 d-flex flex-column\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),showStats&&/*#__PURE__*/_jsx(Stats,{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row flex-grow-1 mb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:loading&&countdown===undefined?/*#__PURE__*/_jsx(EmptyCard,{}):showPayment&&payer?/*#__PURE__*/_jsx(PaymentCard,{account:payer}):/*#__PURE__*/_jsx(TransactionContainer,{enabled:true})})}),/*#__PURE__*/_jsx(TransactionModal,{})]});}export function EmptyCard(){return/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-0 h-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\"})]});}function Stats(){var createdCount=useCreatedCount();var avgConfTime=useAvgConfirmationTime().toFixed(2);var tps=useTps();var activeUsers=useActiveUsers();return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(StatCard,{label:\"Transactions Sent\",value:createdCount,icon:\"send\"}),/*#__PURE__*/_jsx(StatCard,{label:\"Avg. Confirmation Time\",value:\"\".concat(avgConfTime,\"s\"),icon:\"clock\"}),/*#__PURE__*/_jsx(StatCard,{label:\"Players Online\",value:activeUsers,icon:\"user\"}),/*#__PURE__*/_jsx(StatCard,{label:\"Transactions per Second\",value:tps,icon:\"zap\"})]});}function StatCard(_ref){var label=_ref.label,value=_ref.value,icon=_ref.icon;return/*#__PURE__*/_jsx(\"div\",{className:\"stat-card col-6 col-lg-3 d-flex flex-column\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card flex-grow-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-9\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-uppercase text-truncate mb-2\",children:label}),/*#__PURE__*/_jsx(\"span\",{className:\"h2 mb-0 text-primary\",children:value})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 d-none d-md-block text-right\",children:/*#__PURE__*/_jsx(\"span\",{className:\"h2 fe fe-\".concat(icon,\" text-primary mb-0\")})})]})})})});}","map":{"version":3,"sources":["/Users/jstarry/Workspace/solana/break/client/src/pages/GamePage.tsx"],"names":["React","Redirect","useLocation","Header","PaymentCard","TransactionContainer","TransactionModal","useTps","useCreatedCount","useAvgConfirmationTime","usePayerState","useActiveUsers","useGameState","useCountdown","Game","gameState","countdown","showPayment","loading","showStats","undefined","payer","location","pathname","EmptyCard","Stats","createdCount","avgConfTime","toFixed","tps","activeUsers","StatCard","label","value","icon"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { Redirect, useLocation } from \"react-router-dom\";\n\nimport { Header } from \"components/Header\";\nimport { PaymentCard } from \"components/PaymentCard\";\nimport { TransactionContainer } from \"components/TxContainer\";\nimport { TransactionModal } from \"components/TxModal\";\nimport {\n  useTps,\n  useCreatedCount,\n  useAvgConfirmationTime,\n} from \"providers/transactions\";\nimport { usePayerState } from \"providers/wallet\";\nimport { useActiveUsers } from \"providers/server/socket\";\nimport { useGameState, useCountdown } from \"providers/game\";\n\nexport default function Game() {\n  const gameState = useGameState();\n  const [countdown] = useCountdown();\n  const showPayment = gameState === \"payment\";\n  const loading = gameState === \"loading\";\n  const showStats = gameState === \"play\" || countdown !== undefined;\n  const [payer] = usePayerState();\n  const location = useLocation();\n\n  if (showPayment) {\n    if (!payer) {\n      return <Redirect to={{ ...location, pathname: \"/setup\" }} />;\n    } else {\n      return <Redirect to={{ ...location, pathname: \"/wallet\" }} />;\n    }\n  }\n\n  return (\n    <div className=\"container min-vh-100 d-flex flex-column\">\n      <div>\n        <Header />\n        {showStats && <Stats />}\n      </div>\n      <div className=\"row flex-grow-1 mb-5\">\n        <div className=\"col\">\n          {loading && countdown === undefined ? (\n            <EmptyCard />\n          ) : showPayment && payer ? (\n            <PaymentCard account={payer} />\n          ) : (\n            <TransactionContainer enabled />\n          )}\n        </div>\n      </div>\n      <TransactionModal />\n    </div>\n  );\n}\n\nexport function EmptyCard() {\n  return (\n    <div className=\"card mb-0 h-100\">\n      <div className=\"card-header\"></div>\n      <div className=\"card-body\"></div>\n    </div>\n  );\n}\n\nfunction Stats() {\n  const createdCount = useCreatedCount();\n  const avgConfTime = useAvgConfirmationTime().toFixed(2);\n  const tps = useTps();\n  const activeUsers = useActiveUsers();\n\n  return (\n    <div className=\"row\">\n      <StatCard label=\"Transactions Sent\" value={createdCount} icon=\"send\" />\n      <StatCard\n        label=\"Avg. Confirmation Time\"\n        value={`${avgConfTime}s`}\n        icon=\"clock\"\n      />\n      <StatCard label=\"Players Online\" value={activeUsers} icon=\"user\" />\n      <StatCard label=\"Transactions per Second\" value={tps} icon=\"zap\" />\n    </div>\n  );\n}\n\ntype StatProps = {\n  label: React.ReactNode;\n  value: React.ReactNode;\n  icon: string;\n};\nfunction StatCard({ label, value, icon }: StatProps) {\n  return (\n    <div className=\"stat-card col-6 col-lg-3 d-flex flex-column\">\n      <div className=\"card flex-grow-1\">\n        <div className=\"card-body\">\n          <div className=\"row align-items-center\">\n            <div className=\"col-12 col-md-9\">\n              <h6 className=\"text-uppercase text-truncate mb-2\">{label}</h6>\n              <span className=\"h2 mb-0 text-primary\">{value}</span>\n            </div>\n            <div className=\"col-md-3 d-none d-md-block text-right\">\n              <span className={`h2 fe fe-${icon} text-primary mb-0`}></span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}