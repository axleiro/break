{"ast":null,"code":"import*as React from\"react\";import\"styles/animate.scss\";import{useSelectTransaction}from\"providers/transactions/selected\";import{useSlotTiming}from\"providers/slot\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export function timeElapsed(sentAt,receivedAt){if(sentAt===undefined||receivedAt===undefined)return;return(Math.max(0,receivedAt-sentAt)/1000).toFixed(3)+\"s\";}export function TxTableRow(_ref){var _slotTiming,_slotTiming2,_slotTiming3,_timing,_slotTiming4,_timing2,_timing3,_slotTiming5,_timing4,_slotTiming6,_timing5,_slotTiming7,_timing6,_slotTiming8,_timing7,_slotTiming9,_timing8,_slotTiming10;var transaction=_ref.transaction;var signature=transaction.details.signature;var selectTransaction=useSelectTransaction();var slotMetrics=useSlotTiming();var targetSlot;var landedSlot;var timing;var received;if(transaction.status===\"success\"){targetSlot=transaction.slot.target;landedSlot=transaction.slot.landed;timing=transaction.timing;received=transaction.received;}else if(transaction.status===\"timeout\"){}else{targetSlot=transaction.pending.targetSlot;timing=transaction.timing;received=transaction.received;}var slotTiming;var landedTime;var forkedSlots=[];if(landedSlot!==undefined){var _received,_received$find;landedTime=(_received=received)===null||_received===void 0?void 0:(_received$find=_received.find(function(r){return r.slot===landedSlot;}))===null||_received$find===void 0?void 0:_received$find.timestamp;slotTiming=slotMetrics.current.get(landedSlot);if(targetSlot){for(var slot=targetSlot;slot<landedSlot;slot++){var _slotMetrics$current$;if(((_slotMetrics$current$=slotMetrics.current.get(slot))===null||_slotMetrics$current$===void 0?void 0:_slotMetrics$current$.confirmed)===undefined){forkedSlots.push(slot.toString().substr(-3));}}}}return/*#__PURE__*/_jsxs(\"tr\",{className:\"debug-row text-monospace\",onClick:function onClick(){return selectTransaction(signature);},children:[/*#__PURE__*/_jsxs(\"td\",{children:[signature.slice(0,7),\"\\u2026\"]}),/*#__PURE__*/_jsx(\"td\",{children:targetSlot||\"-\"}),/*#__PURE__*/_jsx(\"td\",{children:landedSlot||\"-\"}),/*#__PURE__*/_jsx(\"td\",{children:((_slotTiming=slotTiming)===null||_slotTiming===void 0?void 0:_slotTiming.numTransactions)||\"-\"}),/*#__PURE__*/_jsx(\"td\",{children:((_slotTiming2=slotTiming)===null||_slotTiming2===void 0?void 0:_slotTiming2.numEntries)||\"-\"}),/*#__PURE__*/_jsx(\"td\",{children:((_slotTiming3=slotTiming)===null||_slotTiming3===void 0?void 0:_slotTiming3.maxTpe)||\"-\"}),/*#__PURE__*/_jsx(\"td\",{children:forkedSlots.toString()||\"-\"}),/*#__PURE__*/_jsx(\"td\",{children:timeElapsed((_timing=timing)===null||_timing===void 0?void 0:_timing.subscribed,(_slotTiming4=slotTiming)===null||_slotTiming4===void 0?void 0:_slotTiming4.firstShred)||\"-\"}),/*#__PURE__*/_jsx(\"td\",{children:timeElapsed((_timing2=timing)===null||_timing2===void 0?void 0:_timing2.subscribed,landedTime)||\"-\"}),/*#__PURE__*/_jsx(\"td\",{children:timeElapsed((_timing3=timing)===null||_timing3===void 0?void 0:_timing3.subscribed,(_slotTiming5=slotTiming)===null||_slotTiming5===void 0?void 0:_slotTiming5.fullSlot)||\"-\"}),/*#__PURE__*/_jsx(\"td\",{children:timeElapsed((_timing4=timing)===null||_timing4===void 0?void 0:_timing4.subscribed,(_slotTiming6=slotTiming)===null||_slotTiming6===void 0?void 0:_slotTiming6.replayStart)||\"-\"}),/*#__PURE__*/_jsx(\"td\",{children:timeElapsed((_timing5=timing)===null||_timing5===void 0?void 0:_timing5.subscribed,(_slotTiming7=slotTiming)===null||_slotTiming7===void 0?void 0:_slotTiming7.frozen)||\"-\"}),/*#__PURE__*/_jsx(\"td\",{children:timeElapsed((_timing6=timing)===null||_timing6===void 0?void 0:_timing6.subscribed,(_slotTiming8=slotTiming)===null||_slotTiming8===void 0?void 0:_slotTiming8.voted)||\"-\"}),/*#__PURE__*/_jsx(\"td\",{children:timeElapsed((_timing7=timing)===null||_timing7===void 0?void 0:_timing7.subscribed,(_slotTiming9=slotTiming)===null||_slotTiming9===void 0?void 0:_slotTiming9.confirmed)||\"-\"}),/*#__PURE__*/_jsx(\"td\",{children:timeElapsed((_timing8=timing)===null||_timing8===void 0?void 0:_timing8.subscribed,(_slotTiming10=slotTiming)===null||_slotTiming10===void 0?void 0:_slotTiming10.rooted)||\"-\"})]});}","map":{"version":3,"sources":["/Users/jstarry/Workspace/solana/break/client/src/components/TxTableRow.tsx"],"names":["React","useSelectTransaction","useSlotTiming","timeElapsed","sentAt","receivedAt","undefined","Math","max","toFixed","TxTableRow","transaction","signature","details","selectTransaction","slotMetrics","targetSlot","landedSlot","timing","received","status","slot","target","landed","pending","slotTiming","landedTime","forkedSlots","find","r","timestamp","current","get","confirmed","push","toString","substr","slice","numTransactions","numEntries","maxTpe","subscribed","firstShred","fullSlot","replayStart","frozen","voted","rooted"],"mappings":"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","sourcesContent":["import * as React from \"react\";\n\nimport \"styles/animate.scss\";\nimport { TransactionState } from \"providers/transactions\";\nimport { useSelectTransaction } from \"providers/transactions/selected\";\nimport { useSlotTiming } from \"providers/slot\";\nimport type { SlotTiming } from \"providers/slot\";\n\ninterface Props {\n  transaction: TransactionState;\n}\n\nexport function timeElapsed(\n  sentAt: number | undefined,\n  receivedAt: number | undefined\n): string | undefined {\n  if (sentAt === undefined || receivedAt === undefined) return;\n  return (Math.max(0, receivedAt - sentAt) / 1000).toFixed(3) + \"s\";\n}\n\nexport function TxTableRow({ transaction }: Props) {\n  const signature = transaction.details.signature;\n  const selectTransaction = useSelectTransaction();\n  const slotMetrics = useSlotTiming();\n\n  let targetSlot;\n  let landedSlot: number | undefined;\n  let timing;\n  let received;\n  if (transaction.status === \"success\") {\n    targetSlot = transaction.slot.target;\n    landedSlot = transaction.slot.landed;\n    timing = transaction.timing;\n    received = transaction.received;\n  } else if (transaction.status === \"timeout\") {\n  } else {\n    targetSlot = transaction.pending.targetSlot;\n    timing = transaction.timing;\n    received = transaction.received;\n  }\n\n  let slotTiming: SlotTiming | undefined;\n  let landedTime: number | undefined;\n  let forkedSlots = [];\n  if (landedSlot !== undefined) {\n    landedTime = received?.find((r) => r.slot === landedSlot)?.timestamp;\n    slotTiming = slotMetrics.current.get(landedSlot);\n    if (targetSlot) {\n      for (let slot = targetSlot; slot < landedSlot; slot++) {\n        if (slotMetrics.current.get(slot)?.confirmed === undefined) {\n          forkedSlots.push(slot.toString().substr(-3));\n        }\n      }\n    }\n  }\n\n  return (\n    <tr\n      className=\"debug-row text-monospace\"\n      onClick={() => selectTransaction(signature)}\n    >\n      <td>{signature.slice(0, 7)}â€¦</td>\n      <td>{targetSlot || \"-\"}</td>\n      <td>{landedSlot || \"-\"}</td>\n      <td>{slotTiming?.numTransactions || \"-\"}</td>\n      <td>{slotTiming?.numEntries || \"-\"}</td>\n      <td>{slotTiming?.maxTpe || \"-\"}</td>\n      <td>{forkedSlots.toString() || \"-\"}</td>\n      <td>{timeElapsed(timing?.subscribed, slotTiming?.firstShred) || \"-\"}</td>\n      <td>{timeElapsed(timing?.subscribed, landedTime) || \"-\"}</td>\n      <td>{timeElapsed(timing?.subscribed, slotTiming?.fullSlot) || \"-\"}</td>\n      <td>{timeElapsed(timing?.subscribed, slotTiming?.replayStart) || \"-\"}</td>\n      <td>{timeElapsed(timing?.subscribed, slotTiming?.frozen) || \"-\"}</td>\n      <td>{timeElapsed(timing?.subscribed, slotTiming?.voted) || \"-\"}</td>\n      <td>{timeElapsed(timing?.subscribed, slotTiming?.confirmed) || \"-\"}</td>\n      <td>{timeElapsed(timing?.subscribed, slotTiming?.rooted) || \"-\"}</td>\n    </tr>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}