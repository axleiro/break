{"ast":null,"code":"import _objectSpread from\"/Users/jstarry/Workspace/solana/break/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import*as React from\"react\";import{Doughnut}from\"react-chartjs-2\";import{Redirect,useLocation}from\"react-router-dom\";import{Header}from\"components/Header\";import{TransactionContainer}from\"components/TxContainer\";import{TransactionModal}from\"components/TxModal\";import{useConfirmedCount,useCreatedCount,useDroppedCount,useAvgConfirmationTime}from\"providers/transactions\";import{COUNTDOWN_SECS}from\"providers/game\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Results(){var createdCount=useCreatedCount();var location=useLocation();if(createdCount===0){return/*#__PURE__*/_jsx(Redirect,{to:_objectSpread(_objectSpread({},location),{},{pathname:\"/game\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container min-vh-100 d-flex flex-column\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Stats,{}),/*#__PURE__*/_jsx(Summary,{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row flex-grow-1 mb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(TransactionContainer,{})})}),/*#__PURE__*/_jsx(TransactionModal,{})]});}function Summary(){var confirmedCount=useConfirmedCount();var capacityUsed={solana:100*confirmedCount/(COUNTDOWN_SECS*50000),bitcoin:100*confirmedCount/(COUNTDOWN_SECS*4.6),ethereum:100*confirmedCount/(COUNTDOWN_SECS*15)};return/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center mb-5 results-summary px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-center\",children:[\"With\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-primary font-weight-bold\",children:confirmedCount}),\" \",\"transactions in \",COUNTDOWN_SECS,\" seconds you took up\",\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-primary font-weight-bold\",children:[capacityUsed.solana.toFixed(3),\"%\"]}),\" \",\"of Solana\\u2019s capacity.\"]}),/*#__PURE__*/_jsxs(\"h3\",{className:\"text-center\",children:[\"Processing the same amount of transactions would have taken up\",\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-primary font-weight-bold\",children:[capacityUsed.ethereum.toFixed(1),\"%\"]}),\" \",\"of Ethereum\\u2019s capacity and\",\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-primary font-weight-bold\",children:[capacityUsed.bitcoin.toFixed(1),\"%\"]}),\" \",\"of Bitcoin\\u2019s capacity.\"]})]})});}function Stats(){var createdCount=useCreatedCount();var confirmedCount=useConfirmedCount();var droppedCount=useDroppedCount();var avgConfTime=useAvgConfirmationTime();var hasTxData=createdCount>0;var processingCount=createdCount-confirmedCount-droppedCount;if(!hasTxData)processingCount=1;var txData={labels:[\"Confirmed\",\"Dropped\",\"Processing\"],datasets:[{data:[confirmedCount,droppedCount,processingCount],borderColor:[\"#000\",\"#000\",\"#000\"],backgroundColor:[\"#00ffad\",\"#ea134d\",\"#2A2A2A\"]}]};var hasCapacityData=confirmedCount>0;var capacityUsed=100*confirmedCount/(COUNTDOWN_SECS*50000);var roundCapacityUsed=hasCapacityData?Math.max(0.5,parseFloat(capacityUsed.toFixed(2))):0;var capacityData={datasets:[{data:[roundCapacityUsed,100-roundCapacityUsed],borderColor:[\"#000\",\"#000\"],backgroundColor:[\"#00ffad\",\"#2A2A2A\"]}]};var hasConfData=!!avgConfTime;var numSegments=50;var confData={datasets:[{data:new Array(numSegments).fill(1),borderColor:new Array(numSegments).fill(\"#000\"),backgroundColor:new Array(numSegments).fill(hasConfData?\"#00ffad\":\"#2A2A2A\")}]};return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"stats d-flex mb-5 justify-content-between w-100\",children:[/*#__PURE__*/_jsx(StatCircle,{data:confData,title:\"Average Confirmation\",value:avgConfTime?avgConfTime.toFixed(2)+\"s\":\"---\"}),/*#__PURE__*/_jsx(StatCircle,{data:txData,title:\"Transactions Processed\",value:\"\".concat(confirmedCount,\" of \").concat(createdCount)}),/*#__PURE__*/_jsx(StatCircle,{data:capacityData,title:\"Capacity Used\",value:capacityUsed.toFixed(3)+\"%\"})]})});}var STAT_LEGEND={display:false};var STAT_OPTIONS={showLines:false,cutoutPercentage:90,maintainAspectRatio:false};function StatCircle(_ref){var data=_ref.data,value=_ref.value,title=_ref.title;return/*#__PURE__*/_jsx(\"div\",{className:\"px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative stat-circle\",children:[/*#__PURE__*/_jsx(Doughnut,{data:data,legend:STAT_LEGEND,options:STAT_OPTIONS}),/*#__PURE__*/_jsxs(\"div\",{className:\"donut-content\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-3\",children:value}),/*#__PURE__*/_jsx(\"h6\",{className:\"text-muted text-center text-uppercase\",children:title})]})]})});}","map":{"version":3,"sources":["/Users/jstarry/Workspace/solana/break/client/src/pages/ResultsPage.tsx"],"names":["React","Doughnut","Redirect","useLocation","Header","TransactionContainer","TransactionModal","useConfirmedCount","useCreatedCount","useDroppedCount","useAvgConfirmationTime","COUNTDOWN_SECS","Results","createdCount","location","pathname","Summary","confirmedCount","capacityUsed","solana","bitcoin","ethereum","toFixed","Stats","droppedCount","avgConfTime","hasTxData","processingCount","txData","labels","datasets","data","borderColor","backgroundColor","hasCapacityData","roundCapacityUsed","Math","max","parseFloat","capacityData","hasConfData","numSegments","confData","Array","fill","STAT_LEGEND","display","STAT_OPTIONS","showLines","cutoutPercentage","maintainAspectRatio","StatCircle","value","title"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { Doughnut, ChartData } from \"react-chartjs-2\";\nimport { Redirect, useLocation } from \"react-router-dom\";\n\nimport { Header } from \"components/Header\";\nimport { TransactionContainer } from \"components/TxContainer\";\nimport { TransactionModal } from \"components/TxModal\";\nimport {\n  useConfirmedCount,\n  useCreatedCount,\n  useDroppedCount,\n  useAvgConfirmationTime,\n} from \"providers/transactions\";\nimport { COUNTDOWN_SECS } from \"providers/game\";\n\nexport default function Results() {\n  const createdCount = useCreatedCount();\n  const location = useLocation();\n\n  if (createdCount === 0) {\n    return <Redirect to={{ ...location, pathname: \"/game\" }} />;\n  }\n\n  return (\n    <div className=\"container min-vh-100 d-flex flex-column\">\n      <div>\n        <Header />\n        <Stats />\n        <Summary />\n      </div>\n      <div className=\"row flex-grow-1 mb-5\">\n        <div className=\"col\">\n          <TransactionContainer />\n        </div>\n      </div>\n      <TransactionModal />\n    </div>\n  );\n}\n\nfunction Summary() {\n  const confirmedCount = useConfirmedCount();\n  const capacityUsed = {\n    solana: (100 * confirmedCount) / (COUNTDOWN_SECS * 50000),\n    bitcoin: (100 * confirmedCount) / (COUNTDOWN_SECS * 4.6),\n    ethereum: (100 * confirmedCount) / (COUNTDOWN_SECS * 15),\n  };\n\n  return (\n    <div className=\"row justify-content-center mb-5 results-summary px-4\">\n      <div className=\"col-12\">\n        <h3 className=\"text-center\">\n          With{\" \"}\n          <span className=\"text-primary font-weight-bold\">\n            {confirmedCount}\n          </span>{\" \"}\n          transactions in {COUNTDOWN_SECS} seconds you took up{\" \"}\n          <span className=\"text-primary font-weight-bold\">\n            {capacityUsed.solana.toFixed(3)}%\n          </span>{\" \"}\n          of Solana’s capacity.\n        </h3>\n        <h3 className=\"text-center\">\n          Processing the same amount of transactions would have taken up{\" \"}\n          <span className=\"text-primary font-weight-bold\">\n            {capacityUsed.ethereum.toFixed(1)}%\n          </span>{\" \"}\n          of Ethereum’s capacity and{\" \"}\n          <span className=\"text-primary font-weight-bold\">\n            {capacityUsed.bitcoin.toFixed(1)}%\n          </span>{\" \"}\n          of Bitcoin’s capacity.\n        </h3>\n      </div>\n    </div>\n  );\n}\n\nfunction Stats() {\n  const createdCount = useCreatedCount();\n  const confirmedCount = useConfirmedCount();\n  const droppedCount = useDroppedCount();\n  const avgConfTime = useAvgConfirmationTime();\n\n  const hasTxData = createdCount > 0;\n  let processingCount = createdCount - confirmedCount - droppedCount;\n  if (!hasTxData) processingCount = 1;\n  const txData = {\n    labels: [\"Confirmed\", \"Dropped\", \"Processing\"],\n    datasets: [\n      {\n        data: [confirmedCount, droppedCount, processingCount],\n        borderColor: [\"#000\", \"#000\", \"#000\"],\n        backgroundColor: [\"#00ffad\", \"#ea134d\", \"#2A2A2A\"],\n      },\n    ],\n  };\n\n  const hasCapacityData = confirmedCount > 0;\n  const capacityUsed = (100 * confirmedCount) / (COUNTDOWN_SECS * 50000);\n  const roundCapacityUsed = hasCapacityData\n    ? Math.max(0.5, parseFloat(capacityUsed.toFixed(2)))\n    : 0;\n  const capacityData = {\n    datasets: [\n      {\n        data: [roundCapacityUsed, 100 - roundCapacityUsed],\n        borderColor: [\"#000\", \"#000\"],\n        backgroundColor: [\"#00ffad\", \"#2A2A2A\"],\n      },\n    ],\n  };\n\n  const hasConfData = !!avgConfTime;\n  const numSegments = 50;\n  const confData = {\n    datasets: [\n      {\n        data: new Array(numSegments).fill(1),\n        borderColor: new Array(numSegments).fill(\"#000\"),\n        backgroundColor: new Array(numSegments).fill(\n          hasConfData ? \"#00ffad\" : \"#2A2A2A\"\n        ),\n      },\n    ],\n  };\n\n  return (\n    <div className=\"d-flex justify-content-center\">\n      <div className=\"stats d-flex mb-5 justify-content-between w-100\">\n        <StatCircle\n          data={confData}\n          title=\"Average Confirmation\"\n          value={avgConfTime ? avgConfTime.toFixed(2) + \"s\" : \"---\"}\n        />\n        <StatCircle\n          data={txData}\n          title=\"Transactions Processed\"\n          value={`${confirmedCount} of ${createdCount}`}\n        />\n        <StatCircle\n          data={capacityData}\n          title=\"Capacity Used\"\n          value={capacityUsed.toFixed(3) + \"%\"}\n        />\n      </div>\n    </div>\n  );\n}\n\nconst STAT_LEGEND = {\n  display: false,\n};\n\nconst STAT_OPTIONS = {\n  showLines: false,\n  cutoutPercentage: 90,\n  maintainAspectRatio: false,\n};\n\nfunction StatCircle({\n  data,\n  value,\n  title,\n}: {\n  data: ChartData<Chart.ChartData>;\n  value: string;\n  title: string;\n}) {\n  return (\n    <div className=\"px-4\">\n      <div className=\"position-relative stat-circle\">\n        <Doughnut data={data} legend={STAT_LEGEND} options={STAT_OPTIONS} />\n        <div className=\"donut-content\">\n          <h2 className=\"mb-3\">{value}</h2>\n          <h6 className=\"text-muted text-center text-uppercase\">{title}</h6>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}