{"ast":null,"code":"import _slicedToArray from\"/Users/jstarry/Workspace/solana/break/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import*as React from\"react\";import breakSvg from\"images/break.svg\";import solanaSvg from\"images/solana.svg\";import{useGameState,useResetGame,COUNTDOWN_SECS,useCountdown}from\"providers/game\";import ClusterStatusButton from\"./ClusterStatusButton\";import{useBalance}from\"providers/balance\";import{useConfig,useRefreshAccounts}from\"providers/api\";export function Header(){var _useConfig;var gameState=useGameState();var _useCountdown=useCountdown(),_useCountdown2=_slicedToArray(_useCountdown,1),countdown=_useCountdown2[0];var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),setRefresh=_React$useState2[1];var resetGame=useResetGame();var balance=useBalance();var gameCostLamports=((_useConfig=useConfig())===null||_useConfig===void 0?void 0:_useConfig.gameCost)||0;var refreshAccounts=useRefreshAccounts();var balanceSufficient=balance>=gameCostLamports;React.useEffect(function(){if(countdown!==undefined){var timerId=setInterval(function(){setRefresh(function(r){return!r;});},1000);return function(){return clearTimeout(timerId);};}},[countdown]);var cta=function cta(){if(gameState===\"payment\"&&balanceSufficient){return/*#__PURE__*/React.createElement(\"div\",{className:\"btn btn-pink lift\",onClick:refreshAccounts},\"Play\");}if(gameState===\"loading\"||gameState===\"payment\"){return null;}if(gameState===\"reset\"){return/*#__PURE__*/React.createElement(\"div\",{className:\"btn btn-pink lift\",onClick:resetGame},\"Play Again\");}var secondsRemaining=COUNTDOWN_SECS;if(countdown!==undefined){secondsRemaining=Math.max(0,COUNTDOWN_SECS-Math.floor((performance.now()-countdown)/1000));}return/*#__PURE__*/React.createElement(\"div\",{className:\"btn-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"btn btn-pink btn-secondary\"},/*#__PURE__*/React.createElement(\"span\",{className:\"fe fe-clock\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"btn btn-pink btn-secondary gameState text-center\"},secondsRemaining,\"s\"));};return/*#__PURE__*/React.createElement(\"div\",{className:\"header solana-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"header-body border-dark-purple\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center justify-content-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-auto d-flex flex-column d-md-block align-items-center\"},/*#__PURE__*/React.createElement(\"img\",{src:breakSvg,alt:\"break\",className:\"break mr-3\"}),/*#__PURE__*/React.createElement(\"img\",{src:solanaSvg,alt:\"solana\",className:\"solana\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-auto\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-row align-items-center\"},cta(),/*#__PURE__*/React.createElement(\"div\",{className:\"d-md-inline-block d-none ml-3\"},/*#__PURE__*/React.createElement(ClusterStatusButton,null)),/*#__PURE__*/React.createElement(\"a\",{className:\"btn btn-white lift ml-3\",href:\"https://github.com/solana-labs/break\",target:\"_blank\",rel:\"noopener noreferrer\"},/*#__PURE__*/React.createElement(\"span\",{className:\"fe fe-github mr-2\"}),\"Source\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center d-md-none mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(ClusterStatusButton,null)))));}","map":{"version":3,"sources":["/Users/jstarry/Workspace/solana/break/client/src/components/Header.tsx"],"names":["React","useGameState","useResetGame","COUNTDOWN_SECS","useCountdown","ClusterStatusButton","useBalance","useConfig","useRefreshAccounts","Header","gameState","countdown","useState","setRefresh","resetGame","balance","gameCostLamports","gameCost","refreshAccounts","balanceSufficient","useEffect","undefined","timerId","setInterval","r","clearTimeout","cta","secondsRemaining","Math","max","floor","performance","now","breakSvg","solanaSvg"],"mappings":"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","sourcesContent":["import * as React from \"react\";\n\nimport breakSvg from \"images/break.svg\";\nimport solanaSvg from \"images/solana.svg\";\nimport {\n  useGameState,\n  useResetGame,\n  COUNTDOWN_SECS,\n  useCountdown,\n} from \"providers/game\";\nimport ClusterStatusButton from \"./ClusterStatusButton\";\nimport { useBalance } from \"providers/balance\";\nimport { useConfig, useRefreshAccounts } from \"providers/api\";\n\nexport function Header() {\n  const gameState = useGameState();\n  const [countdown] = useCountdown();\n  const [, setRefresh] = React.useState<boolean>(false);\n  const resetGame = useResetGame();\n  const balance = useBalance();\n  const gameCostLamports = useConfig()?.gameCost || 0;\n  const refreshAccounts = useRefreshAccounts();\n  const balanceSufficient = balance >= gameCostLamports;\n\n  React.useEffect(() => {\n    if (countdown !== undefined) {\n      const timerId = setInterval(() => {\n        setRefresh((r) => !r);\n      }, 1000);\n      return () => clearTimeout(timerId);\n    }\n  }, [countdown]);\n\n  const cta = () => {\n    if (gameState === \"payment\" && balanceSufficient) {\n      return (\n        <div className=\"btn btn-pink lift\" onClick={refreshAccounts}>\n          Play\n        </div>\n      );\n    }\n\n    if (gameState === \"loading\" || gameState === \"payment\") {\n      return null;\n    }\n\n    if (gameState === \"reset\") {\n      return (\n        <div className=\"btn btn-pink lift\" onClick={resetGame}>\n          Play Again\n        </div>\n      );\n    }\n\n    let secondsRemaining = COUNTDOWN_SECS;\n    if (countdown !== undefined) {\n      secondsRemaining = Math.max(\n        0,\n        COUNTDOWN_SECS - Math.floor((performance.now() - countdown) / 1000)\n      );\n    }\n\n    return (\n      <div className=\"btn-group\">\n        <div className=\"btn btn-pink btn-secondary\">\n          <span className=\"fe fe-clock\" />\n        </div>\n        <div className=\"btn btn-pink btn-secondary gameState text-center\">\n          {secondsRemaining}s\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"header solana-header\">\n      <div className=\"header-body border-dark-purple\">\n        <div className=\"row align-items-center justify-content-between\">\n          <div className=\"col-auto d-flex flex-column d-md-block align-items-center\">\n            <img src={breakSvg} alt=\"break\" className=\"break mr-3\" />\n            <img src={solanaSvg} alt=\"solana\" className=\"solana\" />\n          </div>\n          <div className=\"col-auto\">\n            <div className=\"d-flex flex-row align-items-center\">\n              {cta()}\n              <div className=\"d-md-inline-block d-none ml-3\">\n                <ClusterStatusButton />\n              </div>\n              <a\n                className=\"btn btn-white lift ml-3\"\n                href=\"https://github.com/solana-labs/break\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <span className=\"fe fe-github mr-2\"></span>\n                Source\n              </a>\n            </div>\n          </div>\n        </div>\n        <div className=\"row align-items-center d-md-none mt-4\">\n          <div className=\"col-12\">\n            <ClusterStatusButton />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}