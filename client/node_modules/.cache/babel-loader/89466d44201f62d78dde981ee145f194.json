{"ast":null,"code":"module.exports = function (e) {\n  var t = {};\n\n  function n(r) {\n    if (t[r]) return t[r].exports;\n    var a = t[r] = {\n      i: r,\n      l: !1,\n      exports: {}\n    };\n    return e[r].call(a.exports, a, a.exports, n), a.l = !0, a.exports;\n  }\n\n  return n.m = e, n.c = t, n.d = function (e, t, r) {\n    n.o(e, t) || Object.defineProperty(e, t, {\n      enumerable: !0,\n      get: r\n    });\n  }, n.r = function (e) {\n    \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n      value: \"Module\"\n    }), Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    });\n  }, n.t = function (e, t) {\n    if (1 & t && (e = n(e)), 8 & t) return e;\n    if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n    var r = Object.create(null);\n    if (n.r(r), Object.defineProperty(r, \"default\", {\n      enumerable: !0,\n      value: e\n    }), 2 & t && \"string\" != typeof e) for (var a in e) n.d(r, a, function (t) {\n      return e[t];\n    }.bind(null, a));\n    return r;\n  }, n.n = function (e) {\n    var t = e && e.__esModule ? function () {\n      return e.default;\n    } : function () {\n      return e;\n    };\n    return n.d(t, \"a\", t), t;\n  }, n.o = function (e, t) {\n    return Object.prototype.hasOwnProperty.call(e, t);\n  }, n.p = \"\", n(n.s = 8);\n}([function (e, t) {\n  e.exports = require(\"@babel/runtime/helpers/defineProperty\");\n}, function (e, t) {\n  e.exports = require(\"@babel/runtime/regenerator\");\n}, function (e, t) {\n  e.exports = require(\"web3-eth-contract\");\n}, function (e, t) {\n  e.exports = require(\"web3-utils\");\n}, function (e, t) {\n  e.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");\n}, function (e, t) {\n  e.exports = require(\"@babel/runtime/helpers/classCallCheck\");\n}, function (e, t) {\n  e.exports = require(\"@babel/runtime/helpers/createClass\");\n}, function (e) {\n  e.exports = JSON.parse('{\"a\":[{\"constant\":true,\"inputs\":[],\"name\":\"currentEpoch\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"epoch\",\"type\":\"uint256\"}],\"name\":\"getEpochInfo\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"n\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"k\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"t\",\"type\":\"uint256\"},{\"internalType\":\"address[]\",\"name\":\"nodeList\",\"type\":\"address[]\"},{\"internalType\":\"uint256\",\"name\":\"prevEpoch\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nextEpoch\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"nodeAddress\",\"type\":\"address\"}],\"name\":\"getNodeDetails\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"declaredIp\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"position\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"pubKx\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"pubKy\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"tmP2PListenAddress\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"p2pListenAddress\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]}');\n}, function (e, t, n) {\n  \"use strict\";\n\n  n.r(t);\n\n  var r = n(1),\n      a = n.n(r),\n      c = n(4),\n      o = n.n(c),\n      i = n(5),\n      s = n.n(i),\n      u = n(6),\n      d = n.n(u),\n      p = n(0),\n      f = n.n(p),\n      b = n(2),\n      l = n.n(b),\n      h = n(3),\n      y = n(7),\n      m = function () {\n    function e() {\n      var t,\n          n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n          r = n.network,\n          a = void 0 === r ? \"mainnet\" : r,\n          c = n.proxyAddress,\n          o = void 0 === c ? \"0x638646503746d5456209e33a2ff5e3226d698bea\" : c;\n      s()(this, e), f()(this, \"_currentEpoch\", \"19\"), f()(this, \"_torusNodeEndpoints\", [\"https://torus-19.torusnode.com/jrpc\", \"https://torus-node.ens.domains/jrpc\", \"https://torus-node.matic.network/jrpc\", \"https://torus.zilliqa.network/jrpc\", \"https://torus-mainnet.cosmos.network/jrpc\", \"https://torus2.etherscan.com/jrpc\", \"https://torus-node-v2.skalelabs.com/jrpc\", \"https://torus-node.binancex.dev/jrpc\", \"https://torusnode.ont.io/jrpc\"]), f()(this, \"_torusNodePub\", [{\n        X: \"bbe83c64177c3775550e6ba6ac2bc059f6847d644c9e4894e42c60d7974d8c2b\",\n        Y: \"82b49a7caf70def38cdad2740af45c1e4f969650105c5019a29bb18b21a9acb5\"\n      }, {\n        X: \"c208cac4ef9a47d386097a9c915b28e9cb89213abee8d26a17198ee261201b0d\",\n        Y: \"c7db2fe4631109f40833de9dc78d07e35706549ee48fa557b33e4e75e1047873\"\n      }, {\n        X: \"ca1766bb426d4ca5582818a0c5439d560ea64f5baa060793ab29dd3d0ceacfe\",\n        Y: \"d46c1d08c40e1306e1bca328c2287b8268166b11a1ba4b8442ea2ad0c5e32152\"\n      }, {\n        X: \"c3934dd2f6f4b3d2e1e398cc501e143c1e1a381b52feb6d1525af34d16253768\",\n        Y: \"71f5141a5035799099f5ea3e241e66946bc55dc857ac3bd7d6fcdb8dcd3eeeef\"\n      }, {\n        X: \"22e66f1929631d00bf026227581597f085fd94fd952fc0dca9f0833398b5c064\",\n        Y: \"6088b3912e10a1e9d50355a609c10db7d188f16a2e2fd7357e51bf4f6a74f0a1\"\n      }, {\n        X: \"9dc9fa410f3ce9eb70df70cdea00a49f2c4cc7a31c08c0dab5f863ed35ff5139\",\n        Y: \"627a291cb87a75c61da3f65d6818e1e05e360217179817ed27e8c73bca7ec122\"\n      }, {\n        X: \"118b9fc07e97b096d899b9f6658463ce6a8caa64038e37fc969df4e6023dd8c6\",\n        Y: \"baf9fa4e51770f4796ea165dd03a769b8606681a38954a0a92c4cbffd6609ce9\"\n      }, {\n        X: \"8a6d8b925da15a273dec3d8f8395ec35cd6878f274b2b180e4e106999db64043\",\n        Y: \"96f67f870c157743da0b1eb84d89bf30500d74dc84c11f501ee1cb013acc8c46\"\n      }, {\n        X: \"39cecb62e863729f572f7dfc46c24867981bf04bb405fed0df39e33984bfade5\",\n        Y: \"61c2364434012e68a2be2e9952805037e52629d7762fafc8e10e9fb5bad8f790\"\n      }]), f()(this, \"_torusIndexes\", [1, 2, 3, 4, 5, 6, 7, 8, 9]);\n\n      try {\n        var i = new URL(a);\n        t = i.href;\n      } catch (e) {\n        t = \"https://\".concat(a, \".infura.io/v3/\").concat(\"b8cdb0e4cff24599a286bf8e87ff1c96\");\n      }\n\n      l.a.setProvider(t), this.nodeListContract = new l.a(y.a, o), this.nodeListAddress = o, this.updated = !1;\n    }\n\n    var t;\n    return d()(e, [{\n      key: \"_nodeDetails\",\n      get: function () {\n        return {\n          currentEpoch: this._currentEpoch,\n          nodeListAddress: this.nodeListAddress,\n          torusNodeEndpoints: this._torusNodeEndpoints,\n          torusNodePub: this._torusNodePub,\n          torusIndexes: this._torusIndexes,\n          updated: this.updated\n        };\n      }\n    }, {\n      key: \"getCurrentEpoch\",\n      value: function () {\n        return this.nodeListContract.methods.currentEpoch().call();\n      }\n    }, {\n      key: \"getEpochInfo\",\n      value: function (e) {\n        return this.nodeListContract.methods.getEpochInfo(e).call();\n      }\n    }, {\n      key: \"getNodeEndpoint\",\n      value: function (e) {\n        return this.nodeListContract.methods.getNodeDetails(e).call();\n      }\n    }, {\n      key: \"getNodeDetails\",\n      value: (t = o()(a.a.mark(function e() {\n        var t,\n            n,\n            r,\n            c,\n            o,\n            i,\n            s,\n            u,\n            d,\n            p,\n            f,\n            b = this,\n            l = arguments;\n        return a.a.wrap(function (e) {\n          for (;;) switch (e.prev = e.next) {\n            case 0:\n              if (t = l.length > 0 && void 0 !== l[0] && l[0], e.prev = 1, !t) {\n                e.next = 4;\n                break;\n              }\n\n              return e.abrupt(\"return\", this._nodeDetails);\n\n            case 4:\n              if (!this.updated) {\n                e.next = 6;\n                break;\n              }\n\n              return e.abrupt(\"return\", this._nodeDetails);\n\n            case 6:\n              return e.next = 8, this.getCurrentEpoch();\n\n            case 8:\n              return n = e.sent, this._currentEpoch = n, e.next = 12, this.getEpochInfo(n);\n\n            case 12:\n              return r = e.sent, c = [], o = r.nodeList.map(function (e, t) {\n                return t + 1;\n              }), this._torusIndexes = o, r.nodeList.map(function (e) {\n                return c.push(b.getNodeEndpoint(e).catch(function (e) {}));\n              }), e.next = 19, Promise.all(c);\n\n            case 19:\n              for (i = e.sent, s = [], u = [], d = 0; d < i.length; d += 1) p = i[d], f = \"https://\".concat(p.declaredIp.split(\":\")[0], \"/jrpc\"), s.push(f), u.push({\n                X: Object(h.toHex)(p.pubKx).replace(\"0x\", \"\"),\n                Y: Object(h.toHex)(p.pubKy).replace(\"0x\", \"\")\n              });\n\n              return this._torusNodeEndpoints = s, this._torusNodePub = u, this.updated = !0, e.abrupt(\"return\", this._nodeDetails);\n\n            case 29:\n              return e.prev = 29, e.t0 = e.catch(1), e.abrupt(\"return\", this._nodeDetails);\n\n            case 32:\n            case \"end\":\n              return e.stop();\n          }\n        }, e, this, [[1, 29]]);\n      })), function () {\n        return t.apply(this, arguments);\n      })\n    }]), e;\n  }();\n\n  t.default = m;\n}]).default;","map":{"version":3,"sources":["/Users/jstarry/Workspace/solana/break/client/node_modules/@toruslabs/fetch-node-details/dist/fetchNodeDetails.cjs.js"],"names":["module","exports","e","t","n","r","a","i","l","call","m","c","d","o","Object","defineProperty","enumerable","get","Symbol","toStringTag","value","__esModule","create","bind","default","prototype","hasOwnProperty","p","s","require","JSON","parse","u","f","b","h","y","arguments","length","network","proxyAddress","X","Y","URL","href","concat","setProvider","nodeListContract","nodeListAddress","updated","key","currentEpoch","_currentEpoch","torusNodeEndpoints","_torusNodeEndpoints","torusNodePub","_torusNodePub","torusIndexes","_torusIndexes","methods","getEpochInfo","getNodeDetails","mark","wrap","prev","next","abrupt","_nodeDetails","getCurrentEpoch","sent","nodeList","map","push","getNodeEndpoint","catch","Promise","all","declaredIp","split","toHex","pubKx","replace","pubKy","t0","stop","apply"],"mappings":"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","sourcesContent":["module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=8)}([function(e,t){e.exports=require(\"@babel/runtime/helpers/defineProperty\")},function(e,t){e.exports=require(\"@babel/runtime/regenerator\")},function(e,t){e.exports=require(\"web3-eth-contract\")},function(e,t){e.exports=require(\"web3-utils\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/asyncToGenerator\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/classCallCheck\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/createClass\")},function(e){e.exports=JSON.parse('{\"a\":[{\"constant\":true,\"inputs\":[],\"name\":\"currentEpoch\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"epoch\",\"type\":\"uint256\"}],\"name\":\"getEpochInfo\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"n\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"k\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"t\",\"type\":\"uint256\"},{\"internalType\":\"address[]\",\"name\":\"nodeList\",\"type\":\"address[]\"},{\"internalType\":\"uint256\",\"name\":\"prevEpoch\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nextEpoch\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"nodeAddress\",\"type\":\"address\"}],\"name\":\"getNodeDetails\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"declaredIp\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"position\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"pubKx\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"pubKy\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"tmP2PListenAddress\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"p2pListenAddress\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]}')},function(e,t,n){\"use strict\";n.r(t);var r=n(1),a=n.n(r),c=n(4),o=n.n(c),i=n(5),s=n.n(i),u=n(6),d=n.n(u),p=n(0),f=n.n(p),b=n(2),l=n.n(b),h=n(3),y=n(7),m=function(){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.network,a=void 0===r?\"mainnet\":r,c=n.proxyAddress,o=void 0===c?\"0x638646503746d5456209e33a2ff5e3226d698bea\":c;s()(this,e),f()(this,\"_currentEpoch\",\"19\"),f()(this,\"_torusNodeEndpoints\",[\"https://torus-19.torusnode.com/jrpc\",\"https://torus-node.ens.domains/jrpc\",\"https://torus-node.matic.network/jrpc\",\"https://torus.zilliqa.network/jrpc\",\"https://torus-mainnet.cosmos.network/jrpc\",\"https://torus2.etherscan.com/jrpc\",\"https://torus-node-v2.skalelabs.com/jrpc\",\"https://torus-node.binancex.dev/jrpc\",\"https://torusnode.ont.io/jrpc\"]),f()(this,\"_torusNodePub\",[{X:\"bbe83c64177c3775550e6ba6ac2bc059f6847d644c9e4894e42c60d7974d8c2b\",Y:\"82b49a7caf70def38cdad2740af45c1e4f969650105c5019a29bb18b21a9acb5\"},{X:\"c208cac4ef9a47d386097a9c915b28e9cb89213abee8d26a17198ee261201b0d\",Y:\"c7db2fe4631109f40833de9dc78d07e35706549ee48fa557b33e4e75e1047873\"},{X:\"ca1766bb426d4ca5582818a0c5439d560ea64f5baa060793ab29dd3d0ceacfe\",Y:\"d46c1d08c40e1306e1bca328c2287b8268166b11a1ba4b8442ea2ad0c5e32152\"},{X:\"c3934dd2f6f4b3d2e1e398cc501e143c1e1a381b52feb6d1525af34d16253768\",Y:\"71f5141a5035799099f5ea3e241e66946bc55dc857ac3bd7d6fcdb8dcd3eeeef\"},{X:\"22e66f1929631d00bf026227581597f085fd94fd952fc0dca9f0833398b5c064\",Y:\"6088b3912e10a1e9d50355a609c10db7d188f16a2e2fd7357e51bf4f6a74f0a1\"},{X:\"9dc9fa410f3ce9eb70df70cdea00a49f2c4cc7a31c08c0dab5f863ed35ff5139\",Y:\"627a291cb87a75c61da3f65d6818e1e05e360217179817ed27e8c73bca7ec122\"},{X:\"118b9fc07e97b096d899b9f6658463ce6a8caa64038e37fc969df4e6023dd8c6\",Y:\"baf9fa4e51770f4796ea165dd03a769b8606681a38954a0a92c4cbffd6609ce9\"},{X:\"8a6d8b925da15a273dec3d8f8395ec35cd6878f274b2b180e4e106999db64043\",Y:\"96f67f870c157743da0b1eb84d89bf30500d74dc84c11f501ee1cb013acc8c46\"},{X:\"39cecb62e863729f572f7dfc46c24867981bf04bb405fed0df39e33984bfade5\",Y:\"61c2364434012e68a2be2e9952805037e52629d7762fafc8e10e9fb5bad8f790\"}]),f()(this,\"_torusIndexes\",[1,2,3,4,5,6,7,8,9]);try{var i=new URL(a);t=i.href}catch(e){t=\"https://\".concat(a,\".infura.io/v3/\").concat(\"b8cdb0e4cff24599a286bf8e87ff1c96\")}l.a.setProvider(t),this.nodeListContract=new l.a(y.a,o),this.nodeListAddress=o,this.updated=!1}var t;return d()(e,[{key:\"_nodeDetails\",get:function(){return{currentEpoch:this._currentEpoch,nodeListAddress:this.nodeListAddress,torusNodeEndpoints:this._torusNodeEndpoints,torusNodePub:this._torusNodePub,torusIndexes:this._torusIndexes,updated:this.updated}}},{key:\"getCurrentEpoch\",value:function(){return this.nodeListContract.methods.currentEpoch().call()}},{key:\"getEpochInfo\",value:function(e){return this.nodeListContract.methods.getEpochInfo(e).call()}},{key:\"getNodeEndpoint\",value:function(e){return this.nodeListContract.methods.getNodeDetails(e).call()}},{key:\"getNodeDetails\",value:(t=o()(a.a.mark((function e(){var t,n,r,c,o,i,s,u,d,p,f,b=this,l=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]&&l[0],e.prev=1,!t){e.next=4;break}return e.abrupt(\"return\",this._nodeDetails);case 4:if(!this.updated){e.next=6;break}return e.abrupt(\"return\",this._nodeDetails);case 6:return e.next=8,this.getCurrentEpoch();case 8:return n=e.sent,this._currentEpoch=n,e.next=12,this.getEpochInfo(n);case 12:return r=e.sent,c=[],o=r.nodeList.map((function(e,t){return t+1})),this._torusIndexes=o,r.nodeList.map((function(e){return c.push(b.getNodeEndpoint(e).catch((function(e){})))})),e.next=19,Promise.all(c);case 19:for(i=e.sent,s=[],u=[],d=0;d<i.length;d+=1)p=i[d],f=\"https://\".concat(p.declaredIp.split(\":\")[0],\"/jrpc\"),s.push(f),u.push({X:Object(h.toHex)(p.pubKx).replace(\"0x\",\"\"),Y:Object(h.toHex)(p.pubKy).replace(\"0x\",\"\")});return this._torusNodeEndpoints=s,this._torusNodePub=u,this.updated=!0,e.abrupt(\"return\",this._nodeDetails);case 29:return e.prev=29,e.t0=e.catch(1),e.abrupt(\"return\",this._nodeDetails);case 32:case\"end\":return e.stop()}}),e,this,[[1,29]])}))),function(){return t.apply(this,arguments)})}]),e}();t.default=m}]).default;"]},"metadata":{},"sourceType":"script"}