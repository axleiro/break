{"ast":null,"code":"var _jsxFileName = \"/Users/jstarry/Workspace/solana/break/client/src/providers/rpc/index.tsx\";\nimport React from \"react\";\nimport { Connection } from \"@solana/web3.js\";\nimport { useConfig } from \"providers/server/http\";\nimport { BlockhashProvider } from \"./blockhash\";\nimport { BalanceProvider } from \"./balance\";\nconst StateContext = React.createContext(undefined);\nexport function RpcProvider({\n  children\n}) {\n  var _useConfig;\n\n  const state = React.useState(); // Reset rpc url whenever config is fetched\n\n  const rpcUrl = (_useConfig = useConfig()) === null || _useConfig === void 0 ? void 0 : _useConfig.rpcUrl;\n  React.useEffect(() => {\n    const [, setRpcUrl] = state;\n    setRpcUrl(rpcUrl);\n  }, [rpcUrl]);\n  return /*#__PURE__*/React.createElement(StateContext.Provider, {\n    value: state,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(BlockhashProvider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(BalanceProvider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 13\n    }\n  }, children)));\n}\nexport function useRpcUrlState() {\n  const state = React.useContext(StateContext);\n\n  if (state === undefined) {\n    throw new Error(`useRpcUrlState must be used within a RpcProvider`);\n  }\n\n  return state;\n}\nexport function useConnection() {\n  const [url] = useRpcUrlState();\n  return React.useMemo(() => {\n    if (url === undefined) return;\n    return new Connection(url);\n  }, [url]);\n}","map":{"version":3,"sources":["/Users/jstarry/Workspace/solana/break/client/src/providers/rpc/index.tsx"],"names":["React","Connection","useConfig","BlockhashProvider","BalanceProvider","StateContext","createContext","undefined","RpcProvider","children","state","useState","rpcUrl","useEffect","setRpcUrl","useRpcUrlState","useContext","Error","useConnection","url","useMemo"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,iBAA3B;AACA,SAASC,SAAT,QAA0B,uBAA1B;AACA,SAASC,iBAAT,QAAkC,aAAlC;AACA,SAASC,eAAT,QAAgC,WAAhC;AAKA,MAAMC,YAAY,GAAGL,KAAK,CAACM,aAAN,CAAuCC,SAAvC,CAArB;AAGA,OAAO,SAASC,WAAT,CAAqB;AAAEC,EAAAA;AAAF,CAArB,EAAkD;AAAA;;AACvD,QAAMC,KAAK,GAAGV,KAAK,CAACW,QAAN,EAAd,CADuD,CAGvD;;AACA,QAAMC,MAAM,iBAAGV,SAAS,EAAZ,+CAAG,WAAaU,MAA5B;AACAZ,EAAAA,KAAK,CAACa,SAAN,CAAgB,MAAM;AAClB,UAAM,GAAGC,SAAH,IAAgBJ,KAAtB;AACAI,IAAAA,SAAS,CAACF,MAAD,CAAT;AACH,GAHD,EAGG,CAACA,MAAD,CAHH;AAKA,sBACE,oBAAC,YAAD,CAAc,QAAd;AAAuB,IAAA,KAAK,EAAEF,KAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACHD,QADG,CADJ,CADJ,CADF;AASD;AAED,OAAO,SAASM,cAAT,GAAiC;AACtC,QAAML,KAAK,GAAGV,KAAK,CAACgB,UAAN,CAAiBX,YAAjB,CAAd;;AACA,MAAIK,KAAK,KAAKH,SAAd,EAAyB;AACvB,UAAM,IAAIU,KAAJ,CAAW,kDAAX,CAAN;AACD;;AACD,SAAOP,KAAP;AACD;AAED,OAAO,SAASQ,aAAT,GAAiD;AACpD,QAAM,CAACC,GAAD,IAAQJ,cAAc,EAA5B;AACA,SAAOf,KAAK,CAACoB,OAAN,CAAc,MAAM;AACvB,QAAID,GAAG,KAAKZ,SAAZ,EAAuB;AACvB,WAAO,IAAIN,UAAJ,CAAekB,GAAf,CAAP;AACH,GAHM,EAGJ,CAACA,GAAD,CAHI,CAAP;AAIH","sourcesContent":["import React from \"react\";\nimport { Connection } from \"@solana/web3.js\";\nimport { useConfig } from \"providers/server/http\";\nimport { BlockhashProvider } from \"./blockhash\";\nimport { BalanceProvider } from \"./balance\";\n\ntype SetUrl = (url: string) => void;\ntype State = [string | undefined, SetUrl];\n\nconst StateContext = React.createContext<State | undefined>(undefined);\n\ntype ProviderProps = { children: React.ReactNode };\nexport function RpcProvider({ children }: ProviderProps) {\n  const state = React.useState<string>();\n\n  // Reset rpc url whenever config is fetched\n  const rpcUrl = useConfig()?.rpcUrl;\n  React.useEffect(() => {\n      const [, setRpcUrl] = state;\n      setRpcUrl(rpcUrl);\n  }, [rpcUrl]);\n\n  return (\n    <StateContext.Provider value={state}>\n        <BlockhashProvider>\n            <BalanceProvider>\n        {children}\n            </BalanceProvider>\n        </BlockhashProvider>\n    </StateContext.Provider>\n  );\n}\n\nexport function useRpcUrlState(): State {\n  const state = React.useContext(StateContext);\n  if (state === undefined) {\n    throw new Error(`useRpcUrlState must be used within a RpcProvider`);\n  }\n  return state;\n}\n\nexport function useConnection(): Connection | undefined {\n    const [url] = useRpcUrlState();\n    return React.useMemo(() => {\n        if (url === undefined) return;\n        return new Connection(url);\n    }, [url]);\n}\n"]},"metadata":{},"sourceType":"module"}