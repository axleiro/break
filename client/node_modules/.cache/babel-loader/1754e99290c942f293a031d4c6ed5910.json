{"ast":null,"code":"var _jsxFileName = \"/Users/jstarry/Workspace/solana/break/client/src/components/ClusterModal.tsx\";\nimport React from \"react\";\nimport { Link, useLocation, useHistory } from \"react-router-dom\";\nimport { useDebounceCallback } from \"@react-hook/debounce\";\nimport { useServer, serverName, useClusterModal, SERVERS, DEFAULT_SERVER, serverInfo, useCustomServerUrl } from \"../providers/server\";\nexport function useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nfunction ClusterModal() {\n  const [show, setShow] = useClusterModal();\n\n  const onClose = () => setShow(false);\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: `modal fade fixed-right${show ? \" show\" : \"\"}`,\n    onClick: onClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog modal-dialog-vertical\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\",\n    onClick: e => e.stopPropagation(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"c-pointer\",\n    onClick: onClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 15\n    }\n  }, \"\\xD7\"), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-center mb-4 mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 15\n    }\n  }, \"Choose a Cluster\"), /*#__PURE__*/React.createElement(ClusterToggle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"text-center mb-4 mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 15\n    }\n  }, \"Custom RPC URL\"))))));\n}\n\nfunction CustomRpcInput({\n  active\n}) {\n  const [rpcUrl, setRpcUrl] = useRpcUrl();\n  const [editing, setEditing] = React.useState(false);\n  const query = useQuery();\n  const history = useHistory();\n  const location = useLocation();\n\n  const customClass = prefix => active ? `${prefix}-info` : \"\";\n\n  const clusterLocation = location => {\n    if (customUrl.length > 0) query.set(\"cluster\", \"custom\");\n    return { ...location,\n      search: query.toString()\n    };\n  };\n\n  const onUrlInput = useDebounceCallback(url => {\n    setCustomUrl(url);\n\n    if (url.length > 0) {\n      query.set(\"cluster\", \"custom\");\n      history.push({ ...location,\n        search: query.toString()\n      });\n    }\n  }, 500);\n  const inputTextClass = editing ? \"\" : \"text-muted\";\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Link, {\n    to: location => clusterLocation(location),\n    className: \"btn input-group input-group-merge p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    defaultValue: customUrl,\n    className: `form-control form-control-prepended b-black ${inputTextClass} ${customClass(\"border\")}`,\n    onFocus: () => setEditing(true),\n    onBlur: () => setEditing(false),\n    onInput: e => onUrlInput(e.currentTarget.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `input-group-text pr-0 ${customClass(\"border\")} b-black`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: customClass(\"text\") || \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, \"Custom:\")))), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-muted text-center w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, \"Note: This must be a break server url\"));\n}\n\nfunction CustomClusterInput({\n  active\n}) {\n  const [customUrl, setCustomUrl] = useCustomServerUrl();\n  const [editing, setEditing] = React.useState(false);\n  const query = useQuery();\n  const history = useHistory();\n  const location = useLocation();\n\n  const customClass = prefix => active ? `${prefix}-info` : \"\";\n\n  const clusterLocation = location => {\n    if (customUrl.length > 0) query.set(\"cluster\", \"custom\");\n    return { ...location,\n      search: query.toString()\n    };\n  };\n\n  const onUrlInput = useDebounceCallback(url => {\n    setCustomUrl(url);\n\n    if (url.length > 0) {\n      query.set(\"cluster\", \"custom\");\n      history.push({ ...location,\n        search: query.toString()\n      });\n    }\n  }, 500);\n  const inputTextClass = editing ? \"\" : \"text-muted\";\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Link, {\n    to: location => clusterLocation(location),\n    className: \"btn input-group input-group-merge p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    defaultValue: customUrl,\n    className: `form-control form-control-prepended b-black ${inputTextClass} ${customClass(\"border\")}`,\n    onFocus: () => setEditing(true),\n    onBlur: () => setEditing(false),\n    onInput: e => onUrlInput(e.currentTarget.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `input-group-text pr-0 ${customClass(\"border\")} b-black`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: customClass(\"text\") || \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, \"Custom:\")))), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-muted text-center w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }\n  }, \"Note: This must be a break server url\"));\n}\n\nfunction ClusterToggle() {\n  const {\n    server\n  } = useServer();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btn-group-toggle d-flex flex-wrap mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 5\n    }\n  }, SERVERS.map(next => {\n    const active = next === server;\n\n    if (next === \"custom\") {\n      return /*#__PURE__*/React.createElement(CustomClusterInput, {\n        key: next,\n        active: active,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 18\n        }\n      });\n    }\n\n    const btnClass = active ? `active btn-dark border-info text-white` : \"btn-dark\";\n\n    const clusterLocation = location => {\n      const params = new URLSearchParams(location.search);\n\n      if (next !== DEFAULT_SERVER) {\n        params.set(\"cluster\", next);\n      } else {\n        params.delete(\"cluster\");\n      }\n\n      return { ...location,\n        search: params.toString()\n      };\n    };\n\n    return /*#__PURE__*/React.createElement(Link, {\n      key: next,\n      className: `btn text-left col-12 mb-3 ${btnClass}`,\n      to: clusterLocation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }\n    }, `${serverName(next)}: `, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-muted d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 13\n      }\n    }, serverInfo(next)));\n  }));\n}\n\nexport default ClusterModal;","map":{"version":3,"sources":["/Users/jstarry/Workspace/solana/break/client/src/components/ClusterModal.tsx"],"names":["React","Link","useLocation","useHistory","useDebounceCallback","useServer","serverName","useClusterModal","SERVERS","DEFAULT_SERVER","serverInfo","useCustomServerUrl","useQuery","URLSearchParams","search","ClusterModal","show","setShow","onClose","e","stopPropagation","CustomRpcInput","active","rpcUrl","setRpcUrl","useRpcUrl","editing","setEditing","useState","query","history","location","customClass","prefix","clusterLocation","customUrl","length","set","toString","onUrlInput","url","setCustomUrl","push","inputTextClass","currentTarget","value","CustomClusterInput","ClusterToggle","server","map","next","btnClass","params","delete"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link, useLocation, useHistory } from \"react-router-dom\";\nimport { useDebounceCallback } from \"@react-hook/debounce\";\nimport { Location } from \"history\";\nimport {\n  useServer,\n  serverName,\n  useClusterModal,\n  SERVERS,\n  DEFAULT_SERVER,\n  serverInfo,\n  useCustomServerUrl,\n} from \"../providers/server\";\n\nexport function useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nfunction ClusterModal() {\n  const [show, setShow] = useClusterModal();\n  const onClose = () => setShow(false);\n  return (\n    <>\n      <div\n        className={`modal fade fixed-right${show ? \" show\" : \"\"}`}\n        onClick={onClose}\n      >\n        <div className=\"modal-dialog modal-dialog-vertical\">\n          <div className=\"modal-content\">\n            <div className=\"modal-body\" onClick={(e) => e.stopPropagation()}>\n              <span className=\"c-pointer\" onClick={onClose}>\n                &times;\n              </span>\n\n              <h2 className=\"text-center mb-4 mt-4\">Choose a Cluster</h2>\n\n              <ClusterToggle />\n\n              <h2 className=\"text-center mb-4 mt-4\">Custom RPC URL</h2>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nfunction CustomRpcInput({ active }: InputProps) {\n  const [rpcUrl, setRpcUrl] = useRpcUrl();\n  const [editing, setEditing] = React.useState(false);\n  const query = useQuery();\n  const history = useHistory();\n  const location = useLocation();\n\n  const customClass = (prefix: string) => (active ? `${prefix}-info` : \"\");\n\n  const clusterLocation = (location: Location) => {\n    if (customUrl.length > 0) query.set(\"cluster\", \"custom\");\n    return {\n      ...location,\n      search: query.toString(),\n    };\n  };\n\n  const onUrlInput = useDebounceCallback((url: string) => {\n    setCustomUrl(url);\n    if (url.length > 0) {\n      query.set(\"cluster\", \"custom\");\n      history.push({ ...location, search: query.toString() });\n    }\n  }, 500);\n\n  const inputTextClass = editing ? \"\" : \"text-muted\";\n  return (\n    <>\n      <Link\n        to={(location) => clusterLocation(location)}\n        className=\"btn input-group input-group-merge p-0\"\n      >\n        <input\n          type=\"text\"\n          defaultValue={customUrl}\n          className={`form-control form-control-prepended b-black ${inputTextClass} ${customClass(\n            \"border\"\n          )}`}\n          onFocus={() => setEditing(true)}\n          onBlur={() => setEditing(false)}\n          onInput={(e) => onUrlInput(e.currentTarget.value)}\n        />\n        <div className=\"input-group-prepend\">\n          <div\n            className={`input-group-text pr-0 ${customClass(\"border\")} b-black`}\n          >\n            <span className={customClass(\"text\") || \"\"}>Custom:</span>\n          </div>\n        </div>\n      </Link>\n      <span className=\"text-muted text-center w-100\">\n        Note: This must be a break server url\n      </span>\n    </>\n  );\n}\n\ntype InputProps = { active: boolean };\nfunction CustomClusterInput({ active }: InputProps) {\n  const [customUrl, setCustomUrl] = useCustomServerUrl();\n  const [editing, setEditing] = React.useState(false);\n  const query = useQuery();\n  const history = useHistory();\n  const location = useLocation();\n\n  const customClass = (prefix: string) => (active ? `${prefix}-info` : \"\");\n\n  const clusterLocation = (location: Location) => {\n    if (customUrl.length > 0) query.set(\"cluster\", \"custom\");\n    return {\n      ...location,\n      search: query.toString(),\n    };\n  };\n\n  const onUrlInput = useDebounceCallback((url: string) => {\n    setCustomUrl(url);\n    if (url.length > 0) {\n      query.set(\"cluster\", \"custom\");\n      history.push({ ...location, search: query.toString() });\n    }\n  }, 500);\n\n  const inputTextClass = editing ? \"\" : \"text-muted\";\n  return (\n    <>\n      <Link\n        to={(location) => clusterLocation(location)}\n        className=\"btn input-group input-group-merge p-0\"\n      >\n        <input\n          type=\"text\"\n          defaultValue={customUrl}\n          className={`form-control form-control-prepended b-black ${inputTextClass} ${customClass(\n            \"border\"\n          )}`}\n          onFocus={() => setEditing(true)}\n          onBlur={() => setEditing(false)}\n          onInput={(e) => onUrlInput(e.currentTarget.value)}\n        />\n        <div className=\"input-group-prepend\">\n          <div\n            className={`input-group-text pr-0 ${customClass(\"border\")} b-black`}\n          >\n            <span className={customClass(\"text\") || \"\"}>Custom:</span>\n          </div>\n        </div>\n      </Link>\n      <span className=\"text-muted text-center w-100\">\n        Note: This must be a break server url\n      </span>\n    </>\n  );\n}\n\nfunction ClusterToggle() {\n  const { server } = useServer();\n\n  return (\n    <div className=\"btn-group-toggle d-flex flex-wrap mb-4\">\n      {SERVERS.map((next) => {\n        const active = next === server;\n\n        if (next === \"custom\") {\n          return <CustomClusterInput key={next} active={active} />;\n        }\n\n        const btnClass = active\n          ? `active btn-dark border-info text-white`\n          : \"btn-dark\";\n\n        const clusterLocation = (location: Location) => {\n          const params = new URLSearchParams(location.search);\n          if (next !== DEFAULT_SERVER) {\n            params.set(\"cluster\", next);\n          } else {\n            params.delete(\"cluster\");\n          }\n          return {\n            ...location,\n            search: params.toString(),\n          };\n        };\n\n        return (\n          <Link\n            key={next}\n            className={`btn text-left col-12 mb-3 ${btnClass}`}\n            to={clusterLocation}\n          >\n            {`${serverName(next)}: `}\n            <span className=\"text-muted d-inline-block\">\n              {serverInfo(next)}\n            </span>\n          </Link>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default ClusterModal;\n"]},"metadata":{},"sourceType":"module"}