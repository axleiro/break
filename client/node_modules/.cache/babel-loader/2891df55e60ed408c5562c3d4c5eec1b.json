{"ast":null,"code":"module.exports = function (e) {\n  var t = {};\n\n  function n(r) {\n    if (t[r]) return t[r].exports;\n    var a = t[r] = {\n      i: r,\n      l: !1,\n      exports: {}\n    };\n    return e[r].call(a.exports, a, a.exports, n), a.l = !0, a.exports;\n  }\n\n  return n.m = e, n.c = t, n.d = function (e, t, r) {\n    n.o(e, t) || Object.defineProperty(e, t, {\n      enumerable: !0,\n      get: r\n    });\n  }, n.r = function (e) {\n    \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n      value: \"Module\"\n    }), Object.defineProperty(e, \"__esModule\", {\n      value: !0\n    });\n  }, n.t = function (e, t) {\n    if (1 & t && (e = n(e)), 8 & t) return e;\n    if (4 & t && \"object\" == typeof e && e && e.__esModule) return e;\n    var r = Object.create(null);\n    if (n.r(r), Object.defineProperty(r, \"default\", {\n      enumerable: !0,\n      value: e\n    }), 2 & t && \"string\" != typeof e) for (var a in e) n.d(r, a, function (t) {\n      return e[t];\n    }.bind(null, a));\n    return r;\n  }, n.n = function (e) {\n    var t = e && e.__esModule ? function () {\n      return e.default;\n    } : function () {\n      return e;\n    };\n    return n.d(t, \"a\", t), t;\n  }, n.o = function (e, t) {\n    return Object.prototype.hasOwnProperty.call(e, t);\n  }, n.p = \"\", n(n.s = 8);\n}([function (e, t) {\n  e.exports = require(\"@babel/runtime/helpers/defineProperty\");\n}, function (e, t) {\n  e.exports = require(\"@babel/runtime/regenerator\");\n}, function (e, t) {\n  e.exports = require(\"web3-eth-contract\");\n}, function (e, t) {\n  e.exports = require(\"web3-utils\");\n}, function (e, t) {\n  e.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");\n}, function (e, t) {\n  e.exports = require(\"@babel/runtime/helpers/classCallCheck\");\n}, function (e, t) {\n  e.exports = require(\"@babel/runtime/helpers/createClass\");\n}, function (e) {\n  e.exports = JSON.parse('{\"a\":[{\"constant\":true,\"inputs\":[],\"name\":\"currentEpoch\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"epoch\",\"type\":\"uint256\"}],\"name\":\"getEpochInfo\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"n\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"k\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"t\",\"type\":\"uint256\"},{\"internalType\":\"address[]\",\"name\":\"nodeList\",\"type\":\"address[]\"},{\"internalType\":\"uint256\",\"name\":\"prevEpoch\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nextEpoch\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"nodeAddress\",\"type\":\"address\"}],\"name\":\"getNodeDetails\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"declaredIp\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"position\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"pubKx\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"pubKy\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"tmP2PListenAddress\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"p2pListenAddress\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]}');\n}, function (e, t, n) {\n  \"use strict\";\n\n  n.r(t);\n\n  var r = n(1),\n      a = n.n(r),\n      c = n(4),\n      i = n.n(c),\n      o = n(5),\n      s = n.n(o),\n      u = n(6),\n      d = n.n(u),\n      p = n(0),\n      f = n.n(p),\n      b = n(2),\n      l = n.n(b),\n      h = n(3),\n      y = n(7),\n      m = function () {\n    function e() {\n      var t,\n          n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},\n          r = n.network,\n          a = void 0 === r ? \"mainnet\" : r,\n          c = n.proxyAddress,\n          i = void 0 === c ? \"0x638646503746d5456209e33a2ff5e3226d698bea\" : c;\n      s()(this, e), f()(this, \"_currentEpoch\", \"18\"), f()(this, \"_torusNodeEndpoints\", [\"https://torus-18.torusnode.com/jrpc\", \"https://torus.ont.io/jrpc\", \"https://torus.binancex.dev/jrpc\", \"https://torus.matic.network/jrpc\", \"https://torusnode.zilliqa.network/jrpc\", \"https://torus.ens.domains/jrpc\", \"https://torus-node.skalelabs.com/jrpc\", \"https://torus.cosmos.network/jrpc\", \"https://torus.etherscan.com/jrpc\"]), f()(this, \"_torusNodePub\", [{\n        X: \"ecbe4a29e02bb9c077433191051ba74d2458a7ebce95a3183a4201338376539f\",\n        Y: \"114018f97e6576f3fe1c247fc6802de3ff219507589a90544e6921ea9608adcf\"\n      }, {\n        X: \"c1d31f5b0ba633ad5dec80c35df7209ffe282392831f5d3a386d3c5c0c6b4c2b\",\n        Y: \"2490a3e69ac1d5a6c3170b5dc4947f038bf37a738cc279d75c18b6a85c90bc71\"\n      }, {\n        X: \"a6d83cc23847dec596d19e93801a0d67ee85f4b1e5f44f267a7118a0c01381ef\",\n        Y: \"f4b16a19ba44766d53cfaa8fe5858d87c842c7ec0c7b6ecdf11056e6afbeb726\"\n      }, {\n        X: \"79242c54fcfda56c914a28ae89b038dcae8ef2e9dd295171d5562f01d396fbb\",\n        Y: \"519c655678bf9f6091aa17d0bc13443b69fe8b10ba9336c7cc966a2164eec9e4\"\n      }, {\n        X: \"24b3f3582397f4f4274510e94d8e95fa1a17d57fab2e581d4da1dd2ba61c47d2\",\n        Y: \"fa15e5cd538992c74cbca5fc1c654ab4d79fb40e2cf5ec58190c35252d81bb6\"\n      }, {\n        X: \"a08620e79b5c006f261b5221e0fae75d379fd0fcd16c66ced105b3fe5282ed64\",\n        Y: \"e589aa09a7ac28a74d4f4cf7f52718dd9c3cca0541070eec36c66e62a748b17\"\n      }, {\n        X: \"17b5b8402eb27b520eaf4697c7ca3e4818bc79c6cedb6c39490da18602cd84a9\",\n        Y: \"f18768b68383b8fa9a91caa55768fd7bdec64c8c01cc2fa88963fc6fe92775a6\"\n      }, {\n        X: \"47953df2031bf785f95158a1753a65735fecc93a0248620c4afd7b08ddf239e2\",\n        Y: \"8058bf6928e7d49179d08cc354d3d735dd08be2f0aa6023d8a7298bb892cf65\"\n      }, {\n        X: \"e53c29bd04eb211d911d78ebcd36d3645872d8f8a18af4fb1937fb2a1f049078\",\n        Y: \"91ace383afb055ce304ccc5ee811fd8e7407c93e8e0d63d993fc08affc646045\"\n      }]), f()(this, \"_torusIndexes\", [1, 2, 3, 4, 5, 6, 7, 8, 9]);\n\n      try {\n        var o = new URL(a);\n        t = o.href;\n      } catch (e) {\n        t = \"https://api.infura.io/v1/jsonrpc/\".concat(a);\n      }\n\n      try {\n        l.a.setProvider(t), this.nodeListContract = new l.a(y.a, i), this.nodeListAddress = i, this.updated = !1;\n      } catch (e) {\n        throw new Error(e);\n      }\n    }\n\n    var t;\n    return d()(e, [{\n      key: \"getCurrentEpoch\",\n      value: function () {\n        return this.nodeListContract.methods.currentEpoch().call();\n      }\n    }, {\n      key: \"getEpochInfo\",\n      value: function (e) {\n        return this.nodeListContract.methods.getEpochInfo(e).call();\n      }\n    }, {\n      key: \"getNodeEndpoint\",\n      value: function (e) {\n        return this.nodeListContract.methods.getNodeDetails(e).call();\n      }\n    }, {\n      key: \"getNodeDetails\",\n      value: (t = i()(a.a.mark(function e() {\n        var t,\n            n,\n            r,\n            c,\n            i,\n            o,\n            s,\n            u,\n            d,\n            p,\n            f,\n            b = this,\n            l = arguments;\n        return a.a.wrap(function (e) {\n          for (;;) switch (e.prev = e.next) {\n            case 0:\n              if (t = l.length > 0 && void 0 !== l[0] && l[0], e.prev = 1, !t) {\n                e.next = 4;\n                break;\n              }\n\n              return e.abrupt(\"return\", this._nodeDetails);\n\n            case 4:\n              if (!this.updated) {\n                e.next = 6;\n                break;\n              }\n\n              return e.abrupt(\"return\", this._nodeDetails);\n\n            case 6:\n              return e.next = 8, this.getCurrentEpoch();\n\n            case 8:\n              return n = e.sent, this._currentEpoch = n, e.next = 12, this.getEpochInfo(n);\n\n            case 12:\n              return r = e.sent, c = [], i = r.nodeList.map(function (e, t) {\n                return t + 1;\n              }), this._torusIndexes = i, r.nodeList.map(function (e) {\n                return c.push(b.getNodeEndpoint(e).catch(function (e) {}));\n              }), e.next = 19, Promise.all(c);\n\n            case 19:\n              for (o = e.sent, s = [], u = [], d = 0; d < o.length; d += 1) p = o[d], f = \"https://\".concat(p.declaredIp.split(\":\")[0], \"/jrpc\"), s.push(f), u.push({\n                X: Object(h.toHex)(p.pubKx).replace(\"0x\", \"\"),\n                Y: Object(h.toHex)(p.pubKy).replace(\"0x\", \"\")\n              });\n\n              return this._torusNodeEndpoints = s, this._torusNodePub = u, this.updated = !0, e.abrupt(\"return\", this._nodeDetails);\n\n            case 29:\n              return e.prev = 29, e.t0 = e.catch(1), e.abrupt(\"return\", this._nodeDetails);\n\n            case 32:\n            case \"end\":\n              return e.stop();\n          }\n        }, e, this, [[1, 29]]);\n      })), function () {\n        return t.apply(this, arguments);\n      })\n    }, {\n      key: \"_nodeDetails\",\n      get: function () {\n        return {\n          currentEpoch: this._currentEpoch,\n          nodeListAddress: this.nodeListAddress,\n          torusNodeEndpoints: this._torusNodeEndpoints,\n          torusNodePub: this._torusNodePub,\n          torusIndexes: this._torusIndexes,\n          updated: this.updated\n        };\n      }\n    }]), e;\n  }();\n\n  t.default = m;\n}]).default;","map":{"version":3,"sources":["/Users/jstarry/Workspace/solana/break/client/node_modules/@toruslabs/fetch-node-details/dist/fetchNodeDetails.cjs.js"],"names":["module","exports","e","t","n","r","a","i","l","call","m","c","d","o","Object","defineProperty","enumerable","get","Symbol","toStringTag","value","__esModule","create","bind","default","prototype","hasOwnProperty","p","s","require","JSON","parse","u","f","b","h","y","arguments","length","network","proxyAddress","X","Y","URL","href","concat","setProvider","nodeListContract","nodeListAddress","updated","Error","key","methods","currentEpoch","getEpochInfo","getNodeDetails","mark","wrap","prev","next","abrupt","_nodeDetails","getCurrentEpoch","sent","_currentEpoch","nodeList","map","_torusIndexes","push","getNodeEndpoint","catch","Promise","all","declaredIp","split","toHex","pubKx","replace","pubKy","_torusNodeEndpoints","_torusNodePub","t0","stop","apply","torusNodeEndpoints","torusNodePub","torusIndexes"],"mappings":"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","sourcesContent":["module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=8)}([function(e,t){e.exports=require(\"@babel/runtime/helpers/defineProperty\")},function(e,t){e.exports=require(\"@babel/runtime/regenerator\")},function(e,t){e.exports=require(\"web3-eth-contract\")},function(e,t){e.exports=require(\"web3-utils\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/asyncToGenerator\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/classCallCheck\")},function(e,t){e.exports=require(\"@babel/runtime/helpers/createClass\")},function(e){e.exports=JSON.parse('{\"a\":[{\"constant\":true,\"inputs\":[],\"name\":\"currentEpoch\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"epoch\",\"type\":\"uint256\"}],\"name\":\"getEpochInfo\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"n\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"k\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"t\",\"type\":\"uint256\"},{\"internalType\":\"address[]\",\"name\":\"nodeList\",\"type\":\"address[]\"},{\"internalType\":\"uint256\",\"name\":\"prevEpoch\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nextEpoch\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"nodeAddress\",\"type\":\"address\"}],\"name\":\"getNodeDetails\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"declaredIp\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"position\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"pubKx\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"pubKy\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"tmP2PListenAddress\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"p2pListenAddress\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]}')},function(e,t,n){\"use strict\";n.r(t);var r=n(1),a=n.n(r),c=n(4),i=n.n(c),o=n(5),s=n.n(o),u=n(6),d=n.n(u),p=n(0),f=n.n(p),b=n(2),l=n.n(b),h=n(3),y=n(7),m=function(){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.network,a=void 0===r?\"mainnet\":r,c=n.proxyAddress,i=void 0===c?\"0x638646503746d5456209e33a2ff5e3226d698bea\":c;s()(this,e),f()(this,\"_currentEpoch\",\"18\"),f()(this,\"_torusNodeEndpoints\",[\"https://torus-18.torusnode.com/jrpc\",\"https://torus.ont.io/jrpc\",\"https://torus.binancex.dev/jrpc\",\"https://torus.matic.network/jrpc\",\"https://torusnode.zilliqa.network/jrpc\",\"https://torus.ens.domains/jrpc\",\"https://torus-node.skalelabs.com/jrpc\",\"https://torus.cosmos.network/jrpc\",\"https://torus.etherscan.com/jrpc\"]),f()(this,\"_torusNodePub\",[{X:\"ecbe4a29e02bb9c077433191051ba74d2458a7ebce95a3183a4201338376539f\",Y:\"114018f97e6576f3fe1c247fc6802de3ff219507589a90544e6921ea9608adcf\"},{X:\"c1d31f5b0ba633ad5dec80c35df7209ffe282392831f5d3a386d3c5c0c6b4c2b\",Y:\"2490a3e69ac1d5a6c3170b5dc4947f038bf37a738cc279d75c18b6a85c90bc71\"},{X:\"a6d83cc23847dec596d19e93801a0d67ee85f4b1e5f44f267a7118a0c01381ef\",Y:\"f4b16a19ba44766d53cfaa8fe5858d87c842c7ec0c7b6ecdf11056e6afbeb726\"},{X:\"79242c54fcfda56c914a28ae89b038dcae8ef2e9dd295171d5562f01d396fbb\",Y:\"519c655678bf9f6091aa17d0bc13443b69fe8b10ba9336c7cc966a2164eec9e4\"},{X:\"24b3f3582397f4f4274510e94d8e95fa1a17d57fab2e581d4da1dd2ba61c47d2\",Y:\"fa15e5cd538992c74cbca5fc1c654ab4d79fb40e2cf5ec58190c35252d81bb6\"},{X:\"a08620e79b5c006f261b5221e0fae75d379fd0fcd16c66ced105b3fe5282ed64\",Y:\"e589aa09a7ac28a74d4f4cf7f52718dd9c3cca0541070eec36c66e62a748b17\"},{X:\"17b5b8402eb27b520eaf4697c7ca3e4818bc79c6cedb6c39490da18602cd84a9\",Y:\"f18768b68383b8fa9a91caa55768fd7bdec64c8c01cc2fa88963fc6fe92775a6\"},{X:\"47953df2031bf785f95158a1753a65735fecc93a0248620c4afd7b08ddf239e2\",Y:\"8058bf6928e7d49179d08cc354d3d735dd08be2f0aa6023d8a7298bb892cf65\"},{X:\"e53c29bd04eb211d911d78ebcd36d3645872d8f8a18af4fb1937fb2a1f049078\",Y:\"91ace383afb055ce304ccc5ee811fd8e7407c93e8e0d63d993fc08affc646045\"}]),f()(this,\"_torusIndexes\",[1,2,3,4,5,6,7,8,9]);try{var o=new URL(a);t=o.href}catch(e){t=\"https://api.infura.io/v1/jsonrpc/\".concat(a)}try{l.a.setProvider(t),this.nodeListContract=new l.a(y.a,i),this.nodeListAddress=i,this.updated=!1}catch(e){throw new Error(e)}}var t;return d()(e,[{key:\"getCurrentEpoch\",value:function(){return this.nodeListContract.methods.currentEpoch().call()}},{key:\"getEpochInfo\",value:function(e){return this.nodeListContract.methods.getEpochInfo(e).call()}},{key:\"getNodeEndpoint\",value:function(e){return this.nodeListContract.methods.getNodeDetails(e).call()}},{key:\"getNodeDetails\",value:(t=i()(a.a.mark((function e(){var t,n,r,c,i,o,s,u,d,p,f,b=this,l=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]&&l[0],e.prev=1,!t){e.next=4;break}return e.abrupt(\"return\",this._nodeDetails);case 4:if(!this.updated){e.next=6;break}return e.abrupt(\"return\",this._nodeDetails);case 6:return e.next=8,this.getCurrentEpoch();case 8:return n=e.sent,this._currentEpoch=n,e.next=12,this.getEpochInfo(n);case 12:return r=e.sent,c=[],i=r.nodeList.map((function(e,t){return t+1})),this._torusIndexes=i,r.nodeList.map((function(e){return c.push(b.getNodeEndpoint(e).catch((function(e){})))})),e.next=19,Promise.all(c);case 19:for(o=e.sent,s=[],u=[],d=0;d<o.length;d+=1)p=o[d],f=\"https://\".concat(p.declaredIp.split(\":\")[0],\"/jrpc\"),s.push(f),u.push({X:Object(h.toHex)(p.pubKx).replace(\"0x\",\"\"),Y:Object(h.toHex)(p.pubKy).replace(\"0x\",\"\")});return this._torusNodeEndpoints=s,this._torusNodePub=u,this.updated=!0,e.abrupt(\"return\",this._nodeDetails);case 29:return e.prev=29,e.t0=e.catch(1),e.abrupt(\"return\",this._nodeDetails);case 32:case\"end\":return e.stop()}}),e,this,[[1,29]])}))),function(){return t.apply(this,arguments)})},{key:\"_nodeDetails\",get:function(){return{currentEpoch:this._currentEpoch,nodeListAddress:this.nodeListAddress,torusNodeEndpoints:this._torusNodeEndpoints,torusNodePub:this._torusNodePub,torusIndexes:this._torusIndexes,updated:this.updated}}}]),e}();t.default=m}]).default;"]},"metadata":{},"sourceType":"script"}